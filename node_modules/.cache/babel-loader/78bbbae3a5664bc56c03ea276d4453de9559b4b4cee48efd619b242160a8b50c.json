{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nfunction asArray$1(value) {\n  return Array.isArray(value) ? value : [value];\n}\nconst SelfClosingTags = [\"meta\", \"link\", \"base\"];\nconst TagsWithInnerContent = [\"title\", \"titleTemplate\", \"script\", \"style\", \"noscript\"];\nconst HasElementTags = [\"base\", \"meta\", \"link\", \"style\", \"script\", \"noscript\"];\nconst ValidHeadTags = [\"title\", \"titleTemplate\", \"templateParams\", \"base\", \"htmlAttrs\", \"bodyAttrs\", \"meta\", \"link\", \"style\", \"script\", \"noscript\"];\nconst UniqueTags = [\"base\", \"title\", \"titleTemplate\", \"bodyAttrs\", \"htmlAttrs\", \"templateParams\"];\nconst TagConfigKeys = [\"tagPosition\", \"tagPriority\", \"tagDuplicateStrategy\", \"children\", \"innerHTML\", \"textContent\", \"processTemplateParams\"];\nconst IsBrowser = typeof window !== \"undefined\";\nconst composableNames = [\"getActiveHead\", \"useHead\", \"useSeoMeta\", \"useHeadSafe\", \"useServerHead\", \"useServerSeoMeta\", \"useServerHeadSafe\"];\nfunction defineHeadPlugin(plugin) {\n  return plugin;\n}\nfunction hashCode(s) {\n  let h = 9;\n  for (let i = 0; i < s.length;) h = Math.imul(h ^ s.charCodeAt(i++), 9 ** 9);\n  return ((h ^ h >>> 9) + 65536).toString(16).substring(1, 8).toLowerCase();\n}\nfunction hashTag(tag) {\n  return tag._h || hashCode(tag._d ? tag._d : `${tag.tag}:${tag.textContent || tag.innerHTML || \"\"}:${Object.entries(tag.props).map(([key, value]) => `${key}:${String(value)}`).join(\",\")}`);\n}\nfunction tagDedupeKey(tag, fn) {\n  const {\n    props,\n    tag: tagName\n  } = tag;\n  if (UniqueTags.includes(tagName)) return tagName;\n  if (tagName === \"link\" && props.rel === \"canonical\") return \"canonical\";\n  if (props.charset) return \"charset\";\n  const name = [\"id\"];\n  if (tagName === \"meta\") name.push(...[\"name\", \"property\", \"http-equiv\"]);\n  for (const n of name) {\n    if (typeof props[n] !== \"undefined\") {\n      const val = String(props[n]);\n      if (fn && !fn(val)) return false;\n      return `${tagName}:${n}:${val}`;\n    }\n  }\n  return false;\n}\nfunction resolveTitleTemplate(template, title) {\n  if (template == null) return title || null;\n  if (typeof template === \"function\") return template(title);\n  return template;\n}\nfunction asArray(input) {\n  return Array.isArray(input) ? input : [input];\n}\nconst InternalKeySymbol = \"_$key\";\nfunction packObject(input, options) {\n  const keys = Object.keys(input);\n  let [k, v] = keys;\n  options = options || {};\n  options.key = options.key || k;\n  options.value = options.value || v;\n  options.resolveKey = options.resolveKey || (k2 => k2);\n  const resolveKey = index => {\n    const arr = asArray(options?.[index]);\n    return arr.find(k2 => {\n      if (typeof k2 === \"string\" && k2.includes(\".\")) {\n        return k2;\n      }\n      return k2 && keys.includes(k2);\n    });\n  };\n  const resolveValue = (k2, input2) => {\n    if (k2.includes(\".\")) {\n      const paths = k2.split(\".\");\n      let val = input2;\n      for (const path of paths) val = val[path];\n      return val;\n    }\n    return input2[k2];\n  };\n  k = resolveKey(\"key\") || k;\n  v = resolveKey(\"value\") || v;\n  const dedupeKeyPrefix = input.key ? `${InternalKeySymbol}${input.key}-` : \"\";\n  let keyValue = resolveValue(k, input);\n  keyValue = options.resolveKey(keyValue);\n  return {\n    [`${dedupeKeyPrefix}${keyValue}`]: resolveValue(v, input)\n  };\n}\nfunction packArray(input, options) {\n  const packed = {};\n  for (const i of input) {\n    const packedObj = packObject(i, options);\n    const pKey = Object.keys(packedObj)[0];\n    const isDedupeKey = pKey.startsWith(InternalKeySymbol);\n    if (!isDedupeKey && packed[pKey]) {\n      packed[pKey] = Array.isArray(packed[pKey]) ? packed[pKey] : [packed[pKey]];\n      packed[pKey].push(Object.values(packedObj)[0]);\n    } else {\n      packed[isDedupeKey ? pKey.split(\"-\").slice(1).join(\"-\") || pKey : pKey] = packedObj[pKey];\n    }\n  }\n  return packed;\n}\nfunction unpackToArray(input, options) {\n  const unpacked = [];\n  const kFn = options.resolveKeyData || (ctx => ctx.key);\n  const vFn = options.resolveValueData || (ctx => ctx.value);\n  for (const [k, v] of Object.entries(input)) {\n    unpacked.push(...(Array.isArray(v) ? v : [v]).map(i => {\n      const ctx = {\n        key: k,\n        value: i\n      };\n      const val = vFn(ctx);\n      if (typeof val === \"object\") return unpackToArray(val, options);\n      if (Array.isArray(val)) return val;\n      return {\n        [typeof options.key === \"function\" ? options.key(ctx) : options.key]: kFn(ctx),\n        [typeof options.value === \"function\" ? options.value(ctx) : options.value]: val\n      };\n    }).flat());\n  }\n  return unpacked;\n}\nfunction unpackToString(value, options) {\n  return Object.entries(value).map(([key, value2]) => {\n    if (typeof value2 === \"object\") value2 = unpackToString(value2, options);\n    if (options.resolve) {\n      const resolved = options.resolve({\n        key,\n        value: value2\n      });\n      if (resolved) return resolved;\n    }\n    if (typeof value2 === \"number\") value2 = value2.toString();\n    if (typeof value2 === \"string\" && options.wrapValue) {\n      value2 = value2.replace(new RegExp(options.wrapValue, \"g\"), `\\\\${options.wrapValue}`);\n      value2 = `${options.wrapValue}${value2}${options.wrapValue}`;\n    }\n    return `${key}${options.keyValueSeparator || \"\"}${value2}`;\n  }).join(options.entrySeparator || \"\");\n}\nconst p = p2 => ({\n  keyValue: p2,\n  metaKey: \"property\"\n});\nconst k = p2 => ({\n  keyValue: p2\n});\nconst MetaPackingSchema = {\n  appleItunesApp: {\n    unpack: {\n      entrySeparator: \", \",\n      resolve({\n        key,\n        value\n      }) {\n        return `${fixKeyCase(key)}=${value}`;\n      }\n    }\n  },\n  articleExpirationTime: p(\"article:expiration_time\"),\n  articleModifiedTime: p(\"article:modified_time\"),\n  articlePublishedTime: p(\"article:published_time\"),\n  bookReleaseDate: p(\"book:release_date\"),\n  charset: {\n    metaKey: \"charset\"\n  },\n  contentSecurityPolicy: {\n    unpack: {\n      entrySeparator: \"; \",\n      resolve({\n        key,\n        value\n      }) {\n        return `${fixKeyCase(key)} ${value}`;\n      }\n    },\n    metaKey: \"http-equiv\"\n  },\n  contentType: {\n    metaKey: \"http-equiv\"\n  },\n  defaultStyle: {\n    metaKey: \"http-equiv\"\n  },\n  fbAppId: p(\"fb:app_id\"),\n  msapplicationConfig: k(\"msapplication-Config\"),\n  msapplicationTileColor: k(\"msapplication-TileColor\"),\n  msapplicationTileImage: k(\"msapplication-TileImage\"),\n  ogAudioSecureUrl: p(\"og:audio:secure_url\"),\n  ogAudioUrl: p(\"og:audio\"),\n  ogImageSecureUrl: p(\"og:image:secure_url\"),\n  ogImageUrl: p(\"og:image\"),\n  ogSiteName: p(\"og:site_name\"),\n  ogVideoSecureUrl: p(\"og:video:secure_url\"),\n  ogVideoUrl: p(\"og:video\"),\n  profileFirstName: p(\"profile:first_name\"),\n  profileLastName: p(\"profile:last_name\"),\n  profileUsername: p(\"profile:username\"),\n  refresh: {\n    metaKey: \"http-equiv\",\n    unpack: {\n      entrySeparator: \";\",\n      resolve({\n        key,\n        value\n      }) {\n        if (key === \"seconds\") return `${value}`;\n      }\n    }\n  },\n  robots: {\n    unpack: {\n      entrySeparator: \", \",\n      resolve({\n        key,\n        value\n      }) {\n        if (typeof value === \"boolean\") return `${fixKeyCase(key)}`;else return `${fixKeyCase(key)}:${value}`;\n      }\n    }\n  },\n  xUaCompatible: {\n    metaKey: \"http-equiv\"\n  }\n};\nconst openGraphNamespaces = [\"og\", \"book\", \"article\", \"profile\"];\nfunction resolveMetaKeyType(key) {\n  const fKey = fixKeyCase(key).split(\":\")[0];\n  if (openGraphNamespaces.includes(fKey)) return \"property\";\n  return MetaPackingSchema[key]?.metaKey || \"name\";\n}\nfunction resolveMetaKeyValue(key) {\n  return MetaPackingSchema[key]?.keyValue || fixKeyCase(key);\n}\nfunction fixKeyCase(key) {\n  const updated = key.replace(/([A-Z])/g, \"-$1\").toLowerCase();\n  const fKey = updated.split(\"-\")[0];\n  if (openGraphNamespaces.includes(fKey) || fKey === \"twitter\") return key.replace(/([A-Z])/g, \":$1\").toLowerCase();\n  return updated;\n}\nfunction changeKeyCasingDeep(input) {\n  if (Array.isArray(input)) {\n    return input.map(entry => changeKeyCasingDeep(entry));\n  }\n  if (typeof input !== \"object\" || Array.isArray(input)) return input;\n  const output = {};\n  for (const [key, value] of Object.entries(input)) output[fixKeyCase(key)] = changeKeyCasingDeep(value);\n  return output;\n}\nfunction resolvePackedMetaObjectValue(value, key) {\n  const definition = MetaPackingSchema[key];\n  if (key === \"refresh\") return `${value.seconds};url=${value.url}`;\n  return unpackToString(changeKeyCasingDeep(value), {\n    keyValueSeparator: \"=\",\n    entrySeparator: \", \",\n    resolve({\n      value: value2,\n      key: key2\n    }) {\n      if (value2 === null) return \"\";\n      if (typeof value2 === \"boolean\") return `${key2}`;\n    },\n    ...definition?.unpack\n  });\n}\nconst ObjectArrayEntries = [\"og:image\", \"og:video\", \"og:audio\", \"twitter:image\"];\nfunction sanitize(input) {\n  const out = {};\n  Object.entries(input).forEach(([k2, v]) => {\n    if (String(v) !== \"false\" && k2) out[k2] = v;\n  });\n  return out;\n}\nfunction handleObjectEntry(key, v) {\n  const value = sanitize(v);\n  const fKey = fixKeyCase(key);\n  const attr = resolveMetaKeyType(fKey);\n  if (ObjectArrayEntries.includes(fKey)) {\n    const input = {};\n    Object.entries(value).forEach(([k2, v2]) => {\n      input[`${key}${k2 === \"url\" ? \"\" : `${k2.charAt(0).toUpperCase()}${k2.slice(1)}`}`] = v2;\n    });\n    return unpackMeta(input).sort((a, b) => (a[attr]?.length || 0) - (b[attr]?.length || 0));\n  }\n  return [{\n    [attr]: fKey,\n    ...value\n  }];\n}\nfunction unpackMeta(input) {\n  const extras = [];\n  const primitives = {};\n  Object.entries(input).forEach(([key, value]) => {\n    if (!Array.isArray(value)) {\n      if (typeof value === \"object\" && value) {\n        if (ObjectArrayEntries.includes(fixKeyCase(key))) {\n          extras.push(...handleObjectEntry(key, value));\n          return;\n        }\n        primitives[key] = sanitize(value);\n      } else {\n        primitives[key] = value;\n      }\n      return;\n    }\n    value.forEach(v => {\n      extras.push(...(typeof v === \"string\" ? unpackMeta({\n        [key]: v\n      }) : handleObjectEntry(key, v)));\n    });\n  });\n  const meta = unpackToArray(primitives, {\n    key({\n      key\n    }) {\n      return resolveMetaKeyType(key);\n    },\n    value({\n      key\n    }) {\n      return key === \"charset\" ? \"charset\" : \"content\";\n    },\n    resolveKeyData({\n      key\n    }) {\n      return resolveMetaKeyValue(key);\n    },\n    resolveValueData({\n      value,\n      key\n    }) {\n      if (value === null) return \"_null\";\n      if (typeof value === \"object\") return resolvePackedMetaObjectValue(value, key);\n      return typeof value === \"number\" ? value.toString() : value;\n    }\n  });\n  return [...extras, ...meta].map(m => {\n    if (m.content === \"_null\") m.content = null;\n    return m;\n  });\n}\nfunction packMeta(inputs) {\n  const mappedPackingSchema = Object.entries(MetaPackingSchema).map(([key, value]) => [key, value.keyValue]);\n  return packArray(inputs, {\n    key: [\"name\", \"property\", \"httpEquiv\", \"http-equiv\", \"charset\"],\n    value: [\"content\", \"charset\"],\n    resolveKey(k2) {\n      let key = mappedPackingSchema.filter(sk => sk[1] === k2)?.[0]?.[0] || k2;\n      const replacer = (_, letter) => letter?.toUpperCase();\n      key = key.replace(/:([a-z])/g, replacer).replace(/-([a-z])/g, replacer);\n      return key;\n    }\n  });\n}\nconst WhitelistAttributes = {\n  htmlAttrs: [\"id\", \"class\", \"lang\", \"dir\"],\n  bodyAttrs: [\"id\", \"class\"],\n  meta: [\"id\", \"name\", \"property\", \"charset\", \"content\"],\n  noscript: [\"id\", \"textContent\"],\n  script: [\"id\", \"type\", \"textContent\"],\n  link: [\"id\", \"color\", \"crossorigin\", \"fetchpriority\", \"href\", \"hreflang\", \"imagesrcset\", \"imagesizes\", \"integrity\", \"media\", \"referrerpolicy\", \"rel\", \"sizes\", \"type\"]\n};\nfunction acceptDataAttrs(value) {\n  const filtered = {};\n  Object.keys(value || {}).filter(a => a.startsWith(\"data-\")).forEach(a => {\n    filtered[a] = value[a];\n  });\n  return filtered;\n}\nfunction whitelistSafeInput(input) {\n  const filtered = {};\n  Object.keys(input).forEach(key => {\n    const tagValue = input[key];\n    if (!tagValue) return;\n    switch (key) {\n      case \"title\":\n      case \"titleTemplate\":\n      case \"templateParams\":\n        filtered[key] = tagValue;\n        break;\n      case \"htmlAttrs\":\n      case \"bodyAttrs\":\n        filtered[key] = acceptDataAttrs(tagValue);\n        WhitelistAttributes[key].forEach(a => {\n          if (tagValue[a]) filtered[key][a] = tagValue[a];\n        });\n        break;\n      case \"meta\":\n        if (Array.isArray(tagValue)) {\n          filtered[key] = tagValue.map(meta => {\n            const safeMeta = acceptDataAttrs(meta);\n            WhitelistAttributes.meta.forEach(key2 => {\n              if (meta[key2]) safeMeta[key2] = meta[key2];\n            });\n            return safeMeta;\n          }).filter(meta => Object.keys(meta).length > 0);\n        }\n        break;\n      case \"link\":\n        if (Array.isArray(tagValue)) {\n          filtered[key] = tagValue.map(meta => {\n            const link = acceptDataAttrs(meta);\n            WhitelistAttributes.link.forEach(key2 => {\n              const val = meta[key2];\n              if (key2 === \"rel\" && [\"stylesheet\", \"canonical\", \"modulepreload\", \"prerender\", \"preload\", \"prefetch\"].includes(val)) return;\n              if (key2 === \"href\") {\n                if (val.includes(\"javascript:\") || val.includes(\"data:\")) return;\n                link[key2] = val;\n              } else if (val) {\n                link[key2] = val;\n              }\n            });\n            return link;\n          }).filter(link => Object.keys(link).length > 1 && !!link.rel);\n        }\n        break;\n      case \"noscript\":\n        if (Array.isArray(tagValue)) {\n          filtered[key] = tagValue.map(meta => {\n            const noscript = acceptDataAttrs(meta);\n            WhitelistAttributes.noscript.forEach(key2 => {\n              if (meta[key2]) noscript[key2] = meta[key2];\n            });\n            return noscript;\n          }).filter(meta => Object.keys(meta).length > 0);\n        }\n        break;\n      case \"script\":\n        if (Array.isArray(tagValue)) {\n          filtered[key] = tagValue.map(script => {\n            const safeScript = acceptDataAttrs(script);\n            WhitelistAttributes.script.forEach(s => {\n              if (script[s]) {\n                if (s === \"textContent\") {\n                  try {\n                    const jsonVal = typeof script[s] === \"string\" ? JSON.parse(script[s]) : script[s];\n                    safeScript[s] = JSON.stringify(jsonVal, null, 0);\n                  } catch (e) {}\n                } else {\n                  safeScript[s] = script[s];\n                }\n              }\n            });\n            return safeScript;\n          }).filter(meta => Object.keys(meta).length > 0);\n        }\n        break;\n    }\n  });\n  return filtered;\n}\nasync function normaliseTag(tagName, input, e) {\n  const tag = {\n    tag: tagName,\n    props: await normaliseProps(\n    // explicitly check for an object\n    // @ts-expect-error untyped\n    typeof input === \"object\" && typeof input !== \"function\" && !(input instanceof Promise) ? {\n      ...input\n    } : {\n      [[\"script\", \"noscript\", \"style\"].includes(tagName) ? \"innerHTML\" : \"textContent\"]: input\n    }, [\"templateParams\", \"titleTemplate\"].includes(tagName))\n  };\n  TagConfigKeys.forEach(k => {\n    const val = typeof tag.props[k] !== \"undefined\" ? tag.props[k] : e[k];\n    if (typeof val !== \"undefined\") {\n      if (![\"innerHTML\", \"textContent\", \"children\"].includes(k) || TagsWithInnerContent.includes(tag.tag)) {\n        tag[k === \"children\" ? \"innerHTML\" : k] = val;\n      }\n      delete tag.props[k];\n    }\n  });\n  if (tag.props.body) {\n    tag.tagPosition = \"bodyClose\";\n    delete tag.props.body;\n  }\n  if (tag.tag === \"script\") {\n    if (typeof tag.innerHTML === \"object\") {\n      tag.innerHTML = JSON.stringify(tag.innerHTML);\n      tag.props.type = tag.props.type || \"application/json\";\n    }\n  }\n  return Array.isArray(tag.props.content) ? tag.props.content.map(v => ({\n    ...tag,\n    props: {\n      ...tag.props,\n      content: v\n    }\n  })) : tag;\n}\nfunction normaliseClassProp(v) {\n  if (typeof v === \"object\" && !Array.isArray(v)) {\n    v = Object.keys(v).filter(k => v[k]);\n  }\n  return (Array.isArray(v) ? v.join(\" \") : v).split(\" \").filter(c => c.trim()).filter(Boolean).join(\" \");\n}\nasync function normaliseProps(props, virtual) {\n  for (const k of Object.keys(props)) {\n    if (k === \"class\") {\n      props[k] = normaliseClassProp(props[k]);\n      continue;\n    }\n    if (props[k] instanceof Promise) props[k] = await props[k];\n    if (!virtual && !TagConfigKeys.includes(k)) {\n      const v = String(props[k]);\n      const isDataKey = k.startsWith(\"data-\");\n      if (v === \"true\" || v === \"\") {\n        props[k] = isDataKey ? \"true\" : true;\n      } else if (!props[k]) {\n        if (isDataKey && v === \"false\") props[k] = \"false\";else delete props[k];\n      }\n    }\n  }\n  return props;\n}\nconst TagEntityBits = 10;\nasync function normaliseEntryTags(e) {\n  const tagPromises = [];\n  Object.entries(e.resolvedInput).filter(([k, v]) => typeof v !== \"undefined\" && ValidHeadTags.includes(k)).forEach(([k, value]) => {\n    const v = asArray$1(value);\n    tagPromises.push(...v.map(props => normaliseTag(k, props, e)).flat());\n  });\n  return (await Promise.all(tagPromises)).flat().filter(Boolean).map((t, i) => {\n    t._e = e._i;\n    e.mode && (t._m = e.mode);\n    t._p = (e._i << TagEntityBits) + i;\n    return t;\n  });\n}\nconst TAG_WEIGHTS = {\n  // tags\n  base: -10,\n  title: 10\n};\nconst TAG_ALIASES = {\n  // relative scores to their default values\n  critical: -80,\n  high: -10,\n  low: 20\n};\nfunction tagWeight(tag) {\n  let weight = 100;\n  const priority = tag.tagPriority;\n  if (typeof priority === \"number\") return priority;\n  if (tag.tag === \"meta\") {\n    if (tag.props[\"http-equiv\"] === \"content-security-policy\") weight = -30;\n    if (tag.props.charset) weight = -20;\n    if (tag.props.name === \"viewport\") weight = -15;\n  } else if (tag.tag === \"link\" && tag.props.rel === \"preconnect\") {\n    weight = 20;\n  } else if (tag.tag in TAG_WEIGHTS) {\n    weight = TAG_WEIGHTS[tag.tag];\n  }\n  if (typeof priority === \"string\" && priority in TAG_ALIASES) {\n    return weight + TAG_ALIASES[priority];\n  }\n  return weight;\n}\nconst SortModifiers = [{\n  prefix: \"before:\",\n  offset: -1\n}, {\n  prefix: \"after:\",\n  offset: 1\n}];\nconst NetworkEvents = [\"onload\", \"onerror\", \"onabort\", \"onprogress\", \"onloadstart\"];\nconst sepSub = \"%separator\";\nfunction processTemplateParams(s, p, sep) {\n  if (typeof s !== \"string\" || !s.includes(\"%\")) return s;\n  function sub(token) {\n    let val;\n    if ([\"s\", \"pageTitle\"].includes(token)) {\n      val = p.pageTitle;\n    } else if (token.includes(\".\")) {\n      val = token.split(\".\").reduce((acc, key) => acc ? acc[key] || void 0 : void 0, p);\n    } else {\n      val = p[token];\n    }\n    return typeof val !== \"undefined\" ? (val || \"\").replace(/\"/g, '\\\\\"') : false;\n  }\n  let decoded = s;\n  try {\n    decoded = decodeURI(s);\n  } catch {}\n  const tokens = (decoded.match(/%(\\w+\\.+\\w+)|%(\\w+)/g) || []).sort().reverse();\n  tokens.forEach(token => {\n    const re = sub(token.slice(1));\n    if (typeof re === \"string\") {\n      s = s.replace(new RegExp(`\\\\${token}(\\\\W|$)`, \"g\"), (_, args) => `${re}${args}`).trim();\n    }\n  });\n  if (s.includes(sepSub)) {\n    if (s.endsWith(sepSub)) s = s.slice(0, -sepSub.length).trim();\n    if (s.startsWith(sepSub)) s = s.slice(sepSub.length).trim();\n    s = s.replace(new RegExp(`\\\\${sepSub}\\\\s*\\\\${sepSub}`, \"g\"), sepSub);\n    s = processTemplateParams(s, {\n      separator: sep\n    }, sep);\n  }\n  return s;\n}\nexport { HasElementTags, IsBrowser, NetworkEvents, SelfClosingTags, SortModifiers, TAG_ALIASES, TAG_WEIGHTS, TagConfigKeys, TagEntityBits, TagsWithInnerContent, UniqueTags, ValidHeadTags, asArray$1 as asArray, composableNames, defineHeadPlugin, hashCode, hashTag, normaliseClassProp, normaliseEntryTags, normaliseProps, normaliseTag, packMeta, processTemplateParams, resolveMetaKeyType, resolveMetaKeyValue, resolvePackedMetaObjectValue, resolveTitleTemplate, tagDedupeKey, tagWeight, unpackMeta, whitelistSafeInput };","map":{"version":3,"names":["asArray$1","value","Array","isArray","SelfClosingTags","TagsWithInnerContent","HasElementTags","ValidHeadTags","UniqueTags","TagConfigKeys","IsBrowser","window","composableNames","defineHeadPlugin","plugin","hashCode","s","h","i","length","Math","imul","charCodeAt","toString","substring","toLowerCase","hashTag","tag","_h","_d","textContent","innerHTML","Object","entries","props","map","key","String","join","tagDedupeKey","fn","tagName","includes","rel","charset","name","push","n","val","resolveTitleTemplate","template","title","asArray","input","InternalKeySymbol","packObject","options","keys","k","v","resolveKey","k2","index","arr","find","resolveValue","input2","paths","split","path","dedupeKeyPrefix","keyValue","packArray","packed","packedObj","pKey","isDedupeKey","startsWith","values","slice","unpackToArray","unpacked","kFn","resolveKeyData","ctx","vFn","resolveValueData","flat","unpackToString","value2","resolve","resolved","wrapValue","replace","RegExp","keyValueSeparator","entrySeparator","p","p2","metaKey","MetaPackingSchema","appleItunesApp","unpack","fixKeyCase","articleExpirationTime","articleModifiedTime","articlePublishedTime","bookReleaseDate","contentSecurityPolicy","contentType","defaultStyle","fbAppId","msapplicationConfig","msapplicationTileColor","msapplicationTileImage","ogAudioSecureUrl","ogAudioUrl","ogImageSecureUrl","ogImageUrl","ogSiteName","ogVideoSecureUrl","ogVideoUrl","profileFirstName","profileLastName","profileUsername","refresh","robots","xUaCompatible","openGraphNamespaces","resolveMetaKeyType","fKey","resolveMetaKeyValue","updated","changeKeyCasingDeep","entry","output","resolvePackedMetaObjectValue","definition","seconds","url","key2","ObjectArrayEntries","sanitize","out","forEach","handleObjectEntry","attr","v2","charAt","toUpperCase","unpackMeta","sort","a","b","extras","primitives","meta","m","content","packMeta","inputs","mappedPackingSchema","filter","sk","replacer","_","letter","WhitelistAttributes","htmlAttrs","bodyAttrs","noscript","script","link","acceptDataAttrs","filtered","whitelistSafeInput","tagValue","safeMeta","safeScript","jsonVal","JSON","parse","stringify","e","normaliseTag","normaliseProps","Promise","body","tagPosition","type","normaliseClassProp","c","trim","Boolean","virtual","isDataKey","TagEntityBits","normaliseEntryTags","tagPromises","resolvedInput","all","t","_e","_i","mode","_m","_p","TAG_WEIGHTS","base","TAG_ALIASES","critical","high","low","tagWeight","weight","priority","tagPriority","SortModifiers","prefix","offset","NetworkEvents","sepSub","processTemplateParams","sep","sub","token","pageTitle","reduce","acc","decoded","decodeURI","tokens","match","reverse","re","args","endsWith","separator"],"sources":["C:/Users/kacpe/Desktop/Praca/projects/kormix/node_modules/@unhead/shared/dist/index.mjs"],"sourcesContent":["function asArray$1(value) {\n  return Array.isArray(value) ? value : [value];\n}\n\nconst SelfClosingTags = [\"meta\", \"link\", \"base\"];\nconst TagsWithInnerContent = [\"title\", \"titleTemplate\", \"script\", \"style\", \"noscript\"];\nconst HasElementTags = [\n  \"base\",\n  \"meta\",\n  \"link\",\n  \"style\",\n  \"script\",\n  \"noscript\"\n];\nconst ValidHeadTags = [\n  \"title\",\n  \"titleTemplate\",\n  \"templateParams\",\n  \"base\",\n  \"htmlAttrs\",\n  \"bodyAttrs\",\n  \"meta\",\n  \"link\",\n  \"style\",\n  \"script\",\n  \"noscript\"\n];\nconst UniqueTags = [\"base\", \"title\", \"titleTemplate\", \"bodyAttrs\", \"htmlAttrs\", \"templateParams\"];\nconst TagConfigKeys = [\"tagPosition\", \"tagPriority\", \"tagDuplicateStrategy\", \"children\", \"innerHTML\", \"textContent\", \"processTemplateParams\"];\nconst IsBrowser = typeof window !== \"undefined\";\nconst composableNames = [\n  \"getActiveHead\",\n  \"useHead\",\n  \"useSeoMeta\",\n  \"useHeadSafe\",\n  \"useServerHead\",\n  \"useServerSeoMeta\",\n  \"useServerHeadSafe\"\n];\n\nfunction defineHeadPlugin(plugin) {\n  return plugin;\n}\n\nfunction hashCode(s) {\n  let h = 9;\n  for (let i = 0; i < s.length; )\n    h = Math.imul(h ^ s.charCodeAt(i++), 9 ** 9);\n  return ((h ^ h >>> 9) + 65536).toString(16).substring(1, 8).toLowerCase();\n}\nfunction hashTag(tag) {\n  return tag._h || hashCode(tag._d ? tag._d : `${tag.tag}:${tag.textContent || tag.innerHTML || \"\"}:${Object.entries(tag.props).map(([key, value]) => `${key}:${String(value)}`).join(\",\")}`);\n}\n\nfunction tagDedupeKey(tag, fn) {\n  const { props, tag: tagName } = tag;\n  if (UniqueTags.includes(tagName))\n    return tagName;\n  if (tagName === \"link\" && props.rel === \"canonical\")\n    return \"canonical\";\n  if (props.charset)\n    return \"charset\";\n  const name = [\"id\"];\n  if (tagName === \"meta\")\n    name.push(...[\"name\", \"property\", \"http-equiv\"]);\n  for (const n of name) {\n    if (typeof props[n] !== \"undefined\") {\n      const val = String(props[n]);\n      if (fn && !fn(val))\n        return false;\n      return `${tagName}:${n}:${val}`;\n    }\n  }\n  return false;\n}\n\nfunction resolveTitleTemplate(template, title) {\n  if (template == null)\n    return title || null;\n  if (typeof template === \"function\")\n    return template(title);\n  return template;\n}\n\nfunction asArray(input) {\n  return Array.isArray(input) ? input : [input];\n}\nconst InternalKeySymbol = \"_$key\";\nfunction packObject(input, options) {\n  const keys = Object.keys(input);\n  let [k, v] = keys;\n  options = options || {};\n  options.key = options.key || k;\n  options.value = options.value || v;\n  options.resolveKey = options.resolveKey || ((k2) => k2);\n  const resolveKey = (index) => {\n    const arr = asArray(options?.[index]);\n    return arr.find((k2) => {\n      if (typeof k2 === \"string\" && k2.includes(\".\")) {\n        return k2;\n      }\n      return k2 && keys.includes(k2);\n    });\n  };\n  const resolveValue = (k2, input2) => {\n    if (k2.includes(\".\")) {\n      const paths = k2.split(\".\");\n      let val = input2;\n      for (const path of paths)\n        val = val[path];\n      return val;\n    }\n    return input2[k2];\n  };\n  k = resolveKey(\"key\") || k;\n  v = resolveKey(\"value\") || v;\n  const dedupeKeyPrefix = input.key ? `${InternalKeySymbol}${input.key}-` : \"\";\n  let keyValue = resolveValue(k, input);\n  keyValue = options.resolveKey(keyValue);\n  return {\n    [`${dedupeKeyPrefix}${keyValue}`]: resolveValue(v, input)\n  };\n}\n\nfunction packArray(input, options) {\n  const packed = {};\n  for (const i of input) {\n    const packedObj = packObject(i, options);\n    const pKey = Object.keys(packedObj)[0];\n    const isDedupeKey = pKey.startsWith(InternalKeySymbol);\n    if (!isDedupeKey && packed[pKey]) {\n      packed[pKey] = Array.isArray(packed[pKey]) ? packed[pKey] : [packed[pKey]];\n      packed[pKey].push(Object.values(packedObj)[0]);\n    } else {\n      packed[isDedupeKey ? pKey.split(\"-\").slice(1).join(\"-\") || pKey : pKey] = packedObj[pKey];\n    }\n  }\n  return packed;\n}\n\nfunction unpackToArray(input, options) {\n  const unpacked = [];\n  const kFn = options.resolveKeyData || ((ctx) => ctx.key);\n  const vFn = options.resolveValueData || ((ctx) => ctx.value);\n  for (const [k, v] of Object.entries(input)) {\n    unpacked.push(...(Array.isArray(v) ? v : [v]).map((i) => {\n      const ctx = { key: k, value: i };\n      const val = vFn(ctx);\n      if (typeof val === \"object\")\n        return unpackToArray(val, options);\n      if (Array.isArray(val))\n        return val;\n      return {\n        [typeof options.key === \"function\" ? options.key(ctx) : options.key]: kFn(ctx),\n        [typeof options.value === \"function\" ? options.value(ctx) : options.value]: val\n      };\n    }).flat());\n  }\n  return unpacked;\n}\n\nfunction unpackToString(value, options) {\n  return Object.entries(value).map(([key, value2]) => {\n    if (typeof value2 === \"object\")\n      value2 = unpackToString(value2, options);\n    if (options.resolve) {\n      const resolved = options.resolve({ key, value: value2 });\n      if (resolved)\n        return resolved;\n    }\n    if (typeof value2 === \"number\")\n      value2 = value2.toString();\n    if (typeof value2 === \"string\" && options.wrapValue) {\n      value2 = value2.replace(new RegExp(options.wrapValue, \"g\"), `\\\\${options.wrapValue}`);\n      value2 = `${options.wrapValue}${value2}${options.wrapValue}`;\n    }\n    return `${key}${options.keyValueSeparator || \"\"}${value2}`;\n  }).join(options.entrySeparator || \"\");\n}\n\nconst p = (p2) => ({ keyValue: p2, metaKey: \"property\" });\nconst k = (p2) => ({ keyValue: p2 });\nconst MetaPackingSchema = {\n  appleItunesApp: {\n    unpack: {\n      entrySeparator: \", \",\n      resolve({ key, value }) {\n        return `${fixKeyCase(key)}=${value}`;\n      }\n    }\n  },\n  articleExpirationTime: p(\"article:expiration_time\"),\n  articleModifiedTime: p(\"article:modified_time\"),\n  articlePublishedTime: p(\"article:published_time\"),\n  bookReleaseDate: p(\"book:release_date\"),\n  charset: {\n    metaKey: \"charset\"\n  },\n  contentSecurityPolicy: {\n    unpack: {\n      entrySeparator: \"; \",\n      resolve({ key, value }) {\n        return `${fixKeyCase(key)} ${value}`;\n      }\n    },\n    metaKey: \"http-equiv\"\n  },\n  contentType: {\n    metaKey: \"http-equiv\"\n  },\n  defaultStyle: {\n    metaKey: \"http-equiv\"\n  },\n  fbAppId: p(\"fb:app_id\"),\n  msapplicationConfig: k(\"msapplication-Config\"),\n  msapplicationTileColor: k(\"msapplication-TileColor\"),\n  msapplicationTileImage: k(\"msapplication-TileImage\"),\n  ogAudioSecureUrl: p(\"og:audio:secure_url\"),\n  ogAudioUrl: p(\"og:audio\"),\n  ogImageSecureUrl: p(\"og:image:secure_url\"),\n  ogImageUrl: p(\"og:image\"),\n  ogSiteName: p(\"og:site_name\"),\n  ogVideoSecureUrl: p(\"og:video:secure_url\"),\n  ogVideoUrl: p(\"og:video\"),\n  profileFirstName: p(\"profile:first_name\"),\n  profileLastName: p(\"profile:last_name\"),\n  profileUsername: p(\"profile:username\"),\n  refresh: {\n    metaKey: \"http-equiv\",\n    unpack: {\n      entrySeparator: \";\",\n      resolve({ key, value }) {\n        if (key === \"seconds\")\n          return `${value}`;\n      }\n    }\n  },\n  robots: {\n    unpack: {\n      entrySeparator: \", \",\n      resolve({ key, value }) {\n        if (typeof value === \"boolean\")\n          return `${fixKeyCase(key)}`;\n        else\n          return `${fixKeyCase(key)}:${value}`;\n      }\n    }\n  },\n  xUaCompatible: {\n    metaKey: \"http-equiv\"\n  }\n};\nconst openGraphNamespaces = [\n  \"og\",\n  \"book\",\n  \"article\",\n  \"profile\"\n];\nfunction resolveMetaKeyType(key) {\n  const fKey = fixKeyCase(key).split(\":\")[0];\n  if (openGraphNamespaces.includes(fKey))\n    return \"property\";\n  return MetaPackingSchema[key]?.metaKey || \"name\";\n}\nfunction resolveMetaKeyValue(key) {\n  return MetaPackingSchema[key]?.keyValue || fixKeyCase(key);\n}\nfunction fixKeyCase(key) {\n  const updated = key.replace(/([A-Z])/g, \"-$1\").toLowerCase();\n  const fKey = updated.split(\"-\")[0];\n  if (openGraphNamespaces.includes(fKey) || fKey === \"twitter\")\n    return key.replace(/([A-Z])/g, \":$1\").toLowerCase();\n  return updated;\n}\nfunction changeKeyCasingDeep(input) {\n  if (Array.isArray(input)) {\n    return input.map((entry) => changeKeyCasingDeep(entry));\n  }\n  if (typeof input !== \"object\" || Array.isArray(input))\n    return input;\n  const output = {};\n  for (const [key, value] of Object.entries(input))\n    output[fixKeyCase(key)] = changeKeyCasingDeep(value);\n  return output;\n}\nfunction resolvePackedMetaObjectValue(value, key) {\n  const definition = MetaPackingSchema[key];\n  if (key === \"refresh\")\n    return `${value.seconds};url=${value.url}`;\n  return unpackToString(\n    changeKeyCasingDeep(value),\n    {\n      keyValueSeparator: \"=\",\n      entrySeparator: \", \",\n      resolve({ value: value2, key: key2 }) {\n        if (value2 === null)\n          return \"\";\n        if (typeof value2 === \"boolean\")\n          return `${key2}`;\n      },\n      ...definition?.unpack\n    }\n  );\n}\nconst ObjectArrayEntries = [\"og:image\", \"og:video\", \"og:audio\", \"twitter:image\"];\nfunction sanitize(input) {\n  const out = {};\n  Object.entries(input).forEach(([k2, v]) => {\n    if (String(v) !== \"false\" && k2)\n      out[k2] = v;\n  });\n  return out;\n}\nfunction handleObjectEntry(key, v) {\n  const value = sanitize(v);\n  const fKey = fixKeyCase(key);\n  const attr = resolveMetaKeyType(fKey);\n  if (ObjectArrayEntries.includes(fKey)) {\n    const input = {};\n    Object.entries(value).forEach(([k2, v2]) => {\n      input[`${key}${k2 === \"url\" ? \"\" : `${k2.charAt(0).toUpperCase()}${k2.slice(1)}`}`] = v2;\n    });\n    return unpackMeta(input).sort((a, b) => (a[attr]?.length || 0) - (b[attr]?.length || 0));\n  }\n  return [{ [attr]: fKey, ...value }];\n}\nfunction unpackMeta(input) {\n  const extras = [];\n  const primitives = {};\n  Object.entries(input).forEach(([key, value]) => {\n    if (!Array.isArray(value)) {\n      if (typeof value === \"object\" && value) {\n        if (ObjectArrayEntries.includes(fixKeyCase(key))) {\n          extras.push(...handleObjectEntry(key, value));\n          return;\n        }\n        primitives[key] = sanitize(value);\n      } else {\n        primitives[key] = value;\n      }\n      return;\n    }\n    value.forEach((v) => {\n      extras.push(...typeof v === \"string\" ? unpackMeta({ [key]: v }) : handleObjectEntry(key, v));\n    });\n  });\n  const meta = unpackToArray(primitives, {\n    key({ key }) {\n      return resolveMetaKeyType(key);\n    },\n    value({ key }) {\n      return key === \"charset\" ? \"charset\" : \"content\";\n    },\n    resolveKeyData({ key }) {\n      return resolveMetaKeyValue(key);\n    },\n    resolveValueData({ value, key }) {\n      if (value === null)\n        return \"_null\";\n      if (typeof value === \"object\")\n        return resolvePackedMetaObjectValue(value, key);\n      return typeof value === \"number\" ? value.toString() : value;\n    }\n  });\n  return [...extras, ...meta].map((m) => {\n    if (m.content === \"_null\")\n      m.content = null;\n    return m;\n  });\n}\nfunction packMeta(inputs) {\n  const mappedPackingSchema = Object.entries(MetaPackingSchema).map(([key, value]) => [key, value.keyValue]);\n  return packArray(inputs, {\n    key: [\"name\", \"property\", \"httpEquiv\", \"http-equiv\", \"charset\"],\n    value: [\"content\", \"charset\"],\n    resolveKey(k2) {\n      let key = mappedPackingSchema.filter((sk) => sk[1] === k2)?.[0]?.[0] || k2;\n      const replacer = (_, letter) => letter?.toUpperCase();\n      key = key.replace(/:([a-z])/g, replacer).replace(/-([a-z])/g, replacer);\n      return key;\n    }\n  });\n}\n\nconst WhitelistAttributes = {\n  htmlAttrs: [\"id\", \"class\", \"lang\", \"dir\"],\n  bodyAttrs: [\"id\", \"class\"],\n  meta: [\"id\", \"name\", \"property\", \"charset\", \"content\"],\n  noscript: [\"id\", \"textContent\"],\n  script: [\"id\", \"type\", \"textContent\"],\n  link: [\"id\", \"color\", \"crossorigin\", \"fetchpriority\", \"href\", \"hreflang\", \"imagesrcset\", \"imagesizes\", \"integrity\", \"media\", \"referrerpolicy\", \"rel\", \"sizes\", \"type\"]\n};\nfunction acceptDataAttrs(value) {\n  const filtered = {};\n  Object.keys(value || {}).filter((a) => a.startsWith(\"data-\")).forEach((a) => {\n    filtered[a] = value[a];\n  });\n  return filtered;\n}\nfunction whitelistSafeInput(input) {\n  const filtered = {};\n  Object.keys(input).forEach((key) => {\n    const tagValue = input[key];\n    if (!tagValue)\n      return;\n    switch (key) {\n      case \"title\":\n      case \"titleTemplate\":\n      case \"templateParams\":\n        filtered[key] = tagValue;\n        break;\n      case \"htmlAttrs\":\n      case \"bodyAttrs\":\n        filtered[key] = acceptDataAttrs(tagValue);\n        WhitelistAttributes[key].forEach((a) => {\n          if (tagValue[a])\n            filtered[key][a] = tagValue[a];\n        });\n        break;\n      case \"meta\":\n        if (Array.isArray(tagValue)) {\n          filtered[key] = tagValue.map((meta) => {\n            const safeMeta = acceptDataAttrs(meta);\n            WhitelistAttributes.meta.forEach((key2) => {\n              if (meta[key2])\n                safeMeta[key2] = meta[key2];\n            });\n            return safeMeta;\n          }).filter((meta) => Object.keys(meta).length > 0);\n        }\n        break;\n      case \"link\":\n        if (Array.isArray(tagValue)) {\n          filtered[key] = tagValue.map((meta) => {\n            const link = acceptDataAttrs(meta);\n            WhitelistAttributes.link.forEach((key2) => {\n              const val = meta[key2];\n              if (key2 === \"rel\" && [\"stylesheet\", \"canonical\", \"modulepreload\", \"prerender\", \"preload\", \"prefetch\"].includes(val))\n                return;\n              if (key2 === \"href\") {\n                if (val.includes(\"javascript:\") || val.includes(\"data:\"))\n                  return;\n                link[key2] = val;\n              } else if (val) {\n                link[key2] = val;\n              }\n            });\n            return link;\n          }).filter((link) => Object.keys(link).length > 1 && !!link.rel);\n        }\n        break;\n      case \"noscript\":\n        if (Array.isArray(tagValue)) {\n          filtered[key] = tagValue.map((meta) => {\n            const noscript = acceptDataAttrs(meta);\n            WhitelistAttributes.noscript.forEach((key2) => {\n              if (meta[key2])\n                noscript[key2] = meta[key2];\n            });\n            return noscript;\n          }).filter((meta) => Object.keys(meta).length > 0);\n        }\n        break;\n      case \"script\":\n        if (Array.isArray(tagValue)) {\n          filtered[key] = tagValue.map((script) => {\n            const safeScript = acceptDataAttrs(script);\n            WhitelistAttributes.script.forEach((s) => {\n              if (script[s]) {\n                if (s === \"textContent\") {\n                  try {\n                    const jsonVal = typeof script[s] === \"string\" ? JSON.parse(script[s]) : script[s];\n                    safeScript[s] = JSON.stringify(jsonVal, null, 0);\n                  } catch (e) {\n                  }\n                } else {\n                  safeScript[s] = script[s];\n                }\n              }\n            });\n            return safeScript;\n          }).filter((meta) => Object.keys(meta).length > 0);\n        }\n        break;\n    }\n  });\n  return filtered;\n}\n\nasync function normaliseTag(tagName, input, e) {\n  const tag = {\n    tag: tagName,\n    props: await normaliseProps(\n      // explicitly check for an object\n      // @ts-expect-error untyped\n      typeof input === \"object\" && typeof input !== \"function\" && !(input instanceof Promise) ? { ...input } : { [[\"script\", \"noscript\", \"style\"].includes(tagName) ? \"innerHTML\" : \"textContent\"]: input },\n      [\"templateParams\", \"titleTemplate\"].includes(tagName)\n    )\n  };\n  TagConfigKeys.forEach((k) => {\n    const val = typeof tag.props[k] !== \"undefined\" ? tag.props[k] : e[k];\n    if (typeof val !== \"undefined\") {\n      if (![\"innerHTML\", \"textContent\", \"children\"].includes(k) || TagsWithInnerContent.includes(tag.tag)) {\n        tag[k === \"children\" ? \"innerHTML\" : k] = val;\n      }\n      delete tag.props[k];\n    }\n  });\n  if (tag.props.body) {\n    tag.tagPosition = \"bodyClose\";\n    delete tag.props.body;\n  }\n  if (tag.tag === \"script\") {\n    if (typeof tag.innerHTML === \"object\") {\n      tag.innerHTML = JSON.stringify(tag.innerHTML);\n      tag.props.type = tag.props.type || \"application/json\";\n    }\n  }\n  return Array.isArray(tag.props.content) ? tag.props.content.map((v) => ({ ...tag, props: { ...tag.props, content: v } })) : tag;\n}\nfunction normaliseClassProp(v) {\n  if (typeof v === \"object\" && !Array.isArray(v)) {\n    v = Object.keys(v).filter((k) => v[k]);\n  }\n  return (Array.isArray(v) ? v.join(\" \") : v).split(\" \").filter((c) => c.trim()).filter(Boolean).join(\" \");\n}\nasync function normaliseProps(props, virtual) {\n  for (const k of Object.keys(props)) {\n    if (k === \"class\") {\n      props[k] = normaliseClassProp(props[k]);\n      continue;\n    }\n    if (props[k] instanceof Promise)\n      props[k] = await props[k];\n    if (!virtual && !TagConfigKeys.includes(k)) {\n      const v = String(props[k]);\n      const isDataKey = k.startsWith(\"data-\");\n      if (v === \"true\" || v === \"\") {\n        props[k] = isDataKey ? \"true\" : true;\n      } else if (!props[k]) {\n        if (isDataKey && v === \"false\")\n          props[k] = \"false\";\n        else\n          delete props[k];\n      }\n    }\n  }\n  return props;\n}\nconst TagEntityBits = 10;\nasync function normaliseEntryTags(e) {\n  const tagPromises = [];\n  Object.entries(e.resolvedInput).filter(([k, v]) => typeof v !== \"undefined\" && ValidHeadTags.includes(k)).forEach(([k, value]) => {\n    const v = asArray$1(value);\n    tagPromises.push(...v.map((props) => normaliseTag(k, props, e)).flat());\n  });\n  return (await Promise.all(tagPromises)).flat().filter(Boolean).map((t, i) => {\n    t._e = e._i;\n    e.mode && (t._m = e.mode);\n    t._p = (e._i << TagEntityBits) + i;\n    return t;\n  });\n}\n\nconst TAG_WEIGHTS = {\n  // tags\n  base: -10,\n  title: 10\n};\nconst TAG_ALIASES = {\n  // relative scores to their default values\n  critical: -80,\n  high: -10,\n  low: 20\n};\nfunction tagWeight(tag) {\n  let weight = 100;\n  const priority = tag.tagPriority;\n  if (typeof priority === \"number\")\n    return priority;\n  if (tag.tag === \"meta\") {\n    if (tag.props[\"http-equiv\"] === \"content-security-policy\")\n      weight = -30;\n    if (tag.props.charset)\n      weight = -20;\n    if (tag.props.name === \"viewport\")\n      weight = -15;\n  } else if (tag.tag === \"link\" && tag.props.rel === \"preconnect\") {\n    weight = 20;\n  } else if (tag.tag in TAG_WEIGHTS) {\n    weight = TAG_WEIGHTS[tag.tag];\n  }\n  if (typeof priority === \"string\" && priority in TAG_ALIASES) {\n    return weight + TAG_ALIASES[priority];\n  }\n  return weight;\n}\nconst SortModifiers = [{ prefix: \"before:\", offset: -1 }, { prefix: \"after:\", offset: 1 }];\n\nconst NetworkEvents = [\"onload\", \"onerror\", \"onabort\", \"onprogress\", \"onloadstart\"];\n\nconst sepSub = \"%separator\";\nfunction processTemplateParams(s, p, sep) {\n  if (typeof s !== \"string\" || !s.includes(\"%\"))\n    return s;\n  function sub(token) {\n    let val;\n    if ([\"s\", \"pageTitle\"].includes(token)) {\n      val = p.pageTitle;\n    } else if (token.includes(\".\")) {\n      val = token.split(\".\").reduce((acc, key) => acc ? acc[key] || void 0 : void 0, p);\n    } else {\n      val = p[token];\n    }\n    return typeof val !== \"undefined\" ? (val || \"\").replace(/\"/g, '\\\\\"') : false;\n  }\n  let decoded = s;\n  try {\n    decoded = decodeURI(s);\n  } catch {\n  }\n  const tokens = (decoded.match(/%(\\w+\\.+\\w+)|%(\\w+)/g) || []).sort().reverse();\n  tokens.forEach((token) => {\n    const re = sub(token.slice(1));\n    if (typeof re === \"string\") {\n      s = s.replace(new RegExp(`\\\\${token}(\\\\W|$)`, \"g\"), (_, args) => `${re}${args}`).trim();\n    }\n  });\n  if (s.includes(sepSub)) {\n    if (s.endsWith(sepSub))\n      s = s.slice(0, -sepSub.length).trim();\n    if (s.startsWith(sepSub))\n      s = s.slice(sepSub.length).trim();\n    s = s.replace(new RegExp(`\\\\${sepSub}\\\\s*\\\\${sepSub}`, \"g\"), sepSub);\n    s = processTemplateParams(s, { separator: sep }, sep);\n  }\n  return s;\n}\n\nexport { HasElementTags, IsBrowser, NetworkEvents, SelfClosingTags, SortModifiers, TAG_ALIASES, TAG_WEIGHTS, TagConfigKeys, TagEntityBits, TagsWithInnerContent, UniqueTags, ValidHeadTags, asArray$1 as asArray, composableNames, defineHeadPlugin, hashCode, hashTag, normaliseClassProp, normaliseEntryTags, normaliseProps, normaliseTag, packMeta, processTemplateParams, resolveMetaKeyType, resolveMetaKeyValue, resolvePackedMetaObjectValue, resolveTitleTemplate, tagDedupeKey, tagWeight, unpackMeta, whitelistSafeInput };\n"],"mappings":";AAAA,SAASA,SAASA,CAACC,KAAK,EAAE;EACxB,OAAOC,KAAK,CAACC,OAAO,CAACF,KAAK,CAAC,GAAGA,KAAK,GAAG,CAACA,KAAK,CAAC;AAC/C;AAEA,MAAMG,eAAe,GAAG,CAAC,MAAM,EAAE,MAAM,EAAE,MAAM,CAAC;AAChD,MAAMC,oBAAoB,GAAG,CAAC,OAAO,EAAE,eAAe,EAAE,QAAQ,EAAE,OAAO,EAAE,UAAU,CAAC;AACtF,MAAMC,cAAc,GAAG,CACrB,MAAM,EACN,MAAM,EACN,MAAM,EACN,OAAO,EACP,QAAQ,EACR,UAAU,CACX;AACD,MAAMC,aAAa,GAAG,CACpB,OAAO,EACP,eAAe,EACf,gBAAgB,EAChB,MAAM,EACN,WAAW,EACX,WAAW,EACX,MAAM,EACN,MAAM,EACN,OAAO,EACP,QAAQ,EACR,UAAU,CACX;AACD,MAAMC,UAAU,GAAG,CAAC,MAAM,EAAE,OAAO,EAAE,eAAe,EAAE,WAAW,EAAE,WAAW,EAAE,gBAAgB,CAAC;AACjG,MAAMC,aAAa,GAAG,CAAC,aAAa,EAAE,aAAa,EAAE,sBAAsB,EAAE,UAAU,EAAE,WAAW,EAAE,aAAa,EAAE,uBAAuB,CAAC;AAC7I,MAAMC,SAAS,GAAG,OAAOC,MAAM,KAAK,WAAW;AAC/C,MAAMC,eAAe,GAAG,CACtB,eAAe,EACf,SAAS,EACT,YAAY,EACZ,aAAa,EACb,eAAe,EACf,kBAAkB,EAClB,mBAAmB,CACpB;AAED,SAASC,gBAAgBA,CAACC,MAAM,EAAE;EAChC,OAAOA,MAAM;AACf;AAEA,SAASC,QAAQA,CAACC,CAAC,EAAE;EACnB,IAAIC,CAAC,GAAG,CAAC;EACT,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGF,CAAC,CAACG,MAAM,GAC1BF,CAAC,GAAGG,IAAI,CAACC,IAAI,CAACJ,CAAC,GAAGD,CAAC,CAACM,UAAU,CAACJ,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC;EAC9C,OAAO,CAAC,CAACD,CAAC,GAAGA,CAAC,KAAK,CAAC,IAAI,KAAK,EAAEM,QAAQ,CAAC,EAAE,CAAC,CAACC,SAAS,CAAC,CAAC,EAAE,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC;AAC3E;AACA,SAASC,OAAOA,CAACC,GAAG,EAAE;EACpB,OAAOA,GAAG,CAACC,EAAE,IAAIb,QAAQ,CAACY,GAAG,CAACE,EAAE,GAAGF,GAAG,CAACE,EAAE,GAAI,GAAEF,GAAG,CAACA,GAAI,IAAGA,GAAG,CAACG,WAAW,IAAIH,GAAG,CAACI,SAAS,IAAI,EAAG,IAAGC,MAAM,CAACC,OAAO,CAACN,GAAG,CAACO,KAAK,CAAC,CAACC,GAAG,CAAC,CAAC,CAACC,GAAG,EAAEnC,KAAK,CAAC,KAAM,GAAEmC,GAAI,IAAGC,MAAM,CAACpC,KAAK,CAAE,EAAC,CAAC,CAACqC,IAAI,CAAC,GAAG,CAAE,EAAC,CAAC;AAC7L;AAEA,SAASC,YAAYA,CAACZ,GAAG,EAAEa,EAAE,EAAE;EAC7B,MAAM;IAAEN,KAAK;IAAEP,GAAG,EAAEc;EAAQ,CAAC,GAAGd,GAAG;EACnC,IAAInB,UAAU,CAACkC,QAAQ,CAACD,OAAO,CAAC,EAC9B,OAAOA,OAAO;EAChB,IAAIA,OAAO,KAAK,MAAM,IAAIP,KAAK,CAACS,GAAG,KAAK,WAAW,EACjD,OAAO,WAAW;EACpB,IAAIT,KAAK,CAACU,OAAO,EACf,OAAO,SAAS;EAClB,MAAMC,IAAI,GAAG,CAAC,IAAI,CAAC;EACnB,IAAIJ,OAAO,KAAK,MAAM,EACpBI,IAAI,CAACC,IAAI,CAAC,GAAG,CAAC,MAAM,EAAE,UAAU,EAAE,YAAY,CAAC,CAAC;EAClD,KAAK,MAAMC,CAAC,IAAIF,IAAI,EAAE;IACpB,IAAI,OAAOX,KAAK,CAACa,CAAC,CAAC,KAAK,WAAW,EAAE;MACnC,MAAMC,GAAG,GAAGX,MAAM,CAACH,KAAK,CAACa,CAAC,CAAC,CAAC;MAC5B,IAAIP,EAAE,IAAI,CAACA,EAAE,CAACQ,GAAG,CAAC,EAChB,OAAO,KAAK;MACd,OAAQ,GAAEP,OAAQ,IAAGM,CAAE,IAAGC,GAAI,EAAC;IACjC;EACF;EACA,OAAO,KAAK;AACd;AAEA,SAASC,oBAAoBA,CAACC,QAAQ,EAAEC,KAAK,EAAE;EAC7C,IAAID,QAAQ,IAAI,IAAI,EAClB,OAAOC,KAAK,IAAI,IAAI;EACtB,IAAI,OAAOD,QAAQ,KAAK,UAAU,EAChC,OAAOA,QAAQ,CAACC,KAAK,CAAC;EACxB,OAAOD,QAAQ;AACjB;AAEA,SAASE,OAAOA,CAACC,KAAK,EAAE;EACtB,OAAOnD,KAAK,CAACC,OAAO,CAACkD,KAAK,CAAC,GAAGA,KAAK,GAAG,CAACA,KAAK,CAAC;AAC/C;AACA,MAAMC,iBAAiB,GAAG,OAAO;AACjC,SAASC,UAAUA,CAACF,KAAK,EAAEG,OAAO,EAAE;EAClC,MAAMC,IAAI,GAAGzB,MAAM,CAACyB,IAAI,CAACJ,KAAK,CAAC;EAC/B,IAAI,CAACK,CAAC,EAAEC,CAAC,CAAC,GAAGF,IAAI;EACjBD,OAAO,GAAGA,OAAO,IAAI,CAAC,CAAC;EACvBA,OAAO,CAACpB,GAAG,GAAGoB,OAAO,CAACpB,GAAG,IAAIsB,CAAC;EAC9BF,OAAO,CAACvD,KAAK,GAAGuD,OAAO,CAACvD,KAAK,IAAI0D,CAAC;EAClCH,OAAO,CAACI,UAAU,GAAGJ,OAAO,CAACI,UAAU,KAAMC,EAAE,IAAKA,EAAE,CAAC;EACvD,MAAMD,UAAU,GAAIE,KAAK,IAAK;IAC5B,MAAMC,GAAG,GAAGX,OAAO,CAACI,OAAO,GAAGM,KAAK,CAAC,CAAC;IACrC,OAAOC,GAAG,CAACC,IAAI,CAAEH,EAAE,IAAK;MACtB,IAAI,OAAOA,EAAE,KAAK,QAAQ,IAAIA,EAAE,CAACnB,QAAQ,CAAC,GAAG,CAAC,EAAE;QAC9C,OAAOmB,EAAE;MACX;MACA,OAAOA,EAAE,IAAIJ,IAAI,CAACf,QAAQ,CAACmB,EAAE,CAAC;IAChC,CAAC,CAAC;EACJ,CAAC;EACD,MAAMI,YAAY,GAAGA,CAACJ,EAAE,EAAEK,MAAM,KAAK;IACnC,IAAIL,EAAE,CAACnB,QAAQ,CAAC,GAAG,CAAC,EAAE;MACpB,MAAMyB,KAAK,GAAGN,EAAE,CAACO,KAAK,CAAC,GAAG,CAAC;MAC3B,IAAIpB,GAAG,GAAGkB,MAAM;MAChB,KAAK,MAAMG,IAAI,IAAIF,KAAK,EACtBnB,GAAG,GAAGA,GAAG,CAACqB,IAAI,CAAC;MACjB,OAAOrB,GAAG;IACZ;IACA,OAAOkB,MAAM,CAACL,EAAE,CAAC;EACnB,CAAC;EACDH,CAAC,GAAGE,UAAU,CAAC,KAAK,CAAC,IAAIF,CAAC;EAC1BC,CAAC,GAAGC,UAAU,CAAC,OAAO,CAAC,IAAID,CAAC;EAC5B,MAAMW,eAAe,GAAGjB,KAAK,CAACjB,GAAG,GAAI,GAAEkB,iBAAkB,GAAED,KAAK,CAACjB,GAAI,GAAE,GAAG,EAAE;EAC5E,IAAImC,QAAQ,GAAGN,YAAY,CAACP,CAAC,EAAEL,KAAK,CAAC;EACrCkB,QAAQ,GAAGf,OAAO,CAACI,UAAU,CAACW,QAAQ,CAAC;EACvC,OAAO;IACL,CAAE,GAAED,eAAgB,GAAEC,QAAS,EAAC,GAAGN,YAAY,CAACN,CAAC,EAAEN,KAAK;EAC1D,CAAC;AACH;AAEA,SAASmB,SAASA,CAACnB,KAAK,EAAEG,OAAO,EAAE;EACjC,MAAMiB,MAAM,GAAG,CAAC,CAAC;EACjB,KAAK,MAAMvD,CAAC,IAAImC,KAAK,EAAE;IACrB,MAAMqB,SAAS,GAAGnB,UAAU,CAACrC,CAAC,EAAEsC,OAAO,CAAC;IACxC,MAAMmB,IAAI,GAAG3C,MAAM,CAACyB,IAAI,CAACiB,SAAS,CAAC,CAAC,CAAC,CAAC;IACtC,MAAME,WAAW,GAAGD,IAAI,CAACE,UAAU,CAACvB,iBAAiB,CAAC;IACtD,IAAI,CAACsB,WAAW,IAAIH,MAAM,CAACE,IAAI,CAAC,EAAE;MAChCF,MAAM,CAACE,IAAI,CAAC,GAAGzE,KAAK,CAACC,OAAO,CAACsE,MAAM,CAACE,IAAI,CAAC,CAAC,GAAGF,MAAM,CAACE,IAAI,CAAC,GAAG,CAACF,MAAM,CAACE,IAAI,CAAC,CAAC;MAC1EF,MAAM,CAACE,IAAI,CAAC,CAAC7B,IAAI,CAACd,MAAM,CAAC8C,MAAM,CAACJ,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;IAChD,CAAC,MAAM;MACLD,MAAM,CAACG,WAAW,GAAGD,IAAI,CAACP,KAAK,CAAC,GAAG,CAAC,CAACW,KAAK,CAAC,CAAC,CAAC,CAACzC,IAAI,CAAC,GAAG,CAAC,IAAIqC,IAAI,GAAGA,IAAI,CAAC,GAAGD,SAAS,CAACC,IAAI,CAAC;IAC3F;EACF;EACA,OAAOF,MAAM;AACf;AAEA,SAASO,aAAaA,CAAC3B,KAAK,EAAEG,OAAO,EAAE;EACrC,MAAMyB,QAAQ,GAAG,EAAE;EACnB,MAAMC,GAAG,GAAG1B,OAAO,CAAC2B,cAAc,KAAMC,GAAG,IAAKA,GAAG,CAAChD,GAAG,CAAC;EACxD,MAAMiD,GAAG,GAAG7B,OAAO,CAAC8B,gBAAgB,KAAMF,GAAG,IAAKA,GAAG,CAACnF,KAAK,CAAC;EAC5D,KAAK,MAAM,CAACyD,CAAC,EAAEC,CAAC,CAAC,IAAI3B,MAAM,CAACC,OAAO,CAACoB,KAAK,CAAC,EAAE;IAC1C4B,QAAQ,CAACnC,IAAI,CAAC,GAAG,CAAC5C,KAAK,CAACC,OAAO,CAACwD,CAAC,CAAC,GAAGA,CAAC,GAAG,CAACA,CAAC,CAAC,EAAExB,GAAG,CAAEjB,CAAC,IAAK;MACvD,MAAMkE,GAAG,GAAG;QAAEhD,GAAG,EAAEsB,CAAC;QAAEzD,KAAK,EAAEiB;MAAE,CAAC;MAChC,MAAM8B,GAAG,GAAGqC,GAAG,CAACD,GAAG,CAAC;MACpB,IAAI,OAAOpC,GAAG,KAAK,QAAQ,EACzB,OAAOgC,aAAa,CAAChC,GAAG,EAAEQ,OAAO,CAAC;MACpC,IAAItD,KAAK,CAACC,OAAO,CAAC6C,GAAG,CAAC,EACpB,OAAOA,GAAG;MACZ,OAAO;QACL,CAAC,OAAOQ,OAAO,CAACpB,GAAG,KAAK,UAAU,GAAGoB,OAAO,CAACpB,GAAG,CAACgD,GAAG,CAAC,GAAG5B,OAAO,CAACpB,GAAG,GAAG8C,GAAG,CAACE,GAAG,CAAC;QAC9E,CAAC,OAAO5B,OAAO,CAACvD,KAAK,KAAK,UAAU,GAAGuD,OAAO,CAACvD,KAAK,CAACmF,GAAG,CAAC,GAAG5B,OAAO,CAACvD,KAAK,GAAG+C;MAC9E,CAAC;IACH,CAAC,CAAC,CAACuC,IAAI,CAAC,CAAC,CAAC;EACZ;EACA,OAAON,QAAQ;AACjB;AAEA,SAASO,cAAcA,CAACvF,KAAK,EAAEuD,OAAO,EAAE;EACtC,OAAOxB,MAAM,CAACC,OAAO,CAAChC,KAAK,CAAC,CAACkC,GAAG,CAAC,CAAC,CAACC,GAAG,EAAEqD,MAAM,CAAC,KAAK;IAClD,IAAI,OAAOA,MAAM,KAAK,QAAQ,EAC5BA,MAAM,GAAGD,cAAc,CAACC,MAAM,EAAEjC,OAAO,CAAC;IAC1C,IAAIA,OAAO,CAACkC,OAAO,EAAE;MACnB,MAAMC,QAAQ,GAAGnC,OAAO,CAACkC,OAAO,CAAC;QAAEtD,GAAG;QAAEnC,KAAK,EAAEwF;MAAO,CAAC,CAAC;MACxD,IAAIE,QAAQ,EACV,OAAOA,QAAQ;IACnB;IACA,IAAI,OAAOF,MAAM,KAAK,QAAQ,EAC5BA,MAAM,GAAGA,MAAM,CAAClE,QAAQ,CAAC,CAAC;IAC5B,IAAI,OAAOkE,MAAM,KAAK,QAAQ,IAAIjC,OAAO,CAACoC,SAAS,EAAE;MACnDH,MAAM,GAAGA,MAAM,CAACI,OAAO,CAAC,IAAIC,MAAM,CAACtC,OAAO,CAACoC,SAAS,EAAE,GAAG,CAAC,EAAG,KAAIpC,OAAO,CAACoC,SAAU,EAAC,CAAC;MACrFH,MAAM,GAAI,GAAEjC,OAAO,CAACoC,SAAU,GAAEH,MAAO,GAAEjC,OAAO,CAACoC,SAAU,EAAC;IAC9D;IACA,OAAQ,GAAExD,GAAI,GAAEoB,OAAO,CAACuC,iBAAiB,IAAI,EAAG,GAAEN,MAAO,EAAC;EAC5D,CAAC,CAAC,CAACnD,IAAI,CAACkB,OAAO,CAACwC,cAAc,IAAI,EAAE,CAAC;AACvC;AAEA,MAAMC,CAAC,GAAIC,EAAE,KAAM;EAAE3B,QAAQ,EAAE2B,EAAE;EAAEC,OAAO,EAAE;AAAW,CAAC,CAAC;AACzD,MAAMzC,CAAC,GAAIwC,EAAE,KAAM;EAAE3B,QAAQ,EAAE2B;AAAG,CAAC,CAAC;AACpC,MAAME,iBAAiB,GAAG;EACxBC,cAAc,EAAE;IACdC,MAAM,EAAE;MACNN,cAAc,EAAE,IAAI;MACpBN,OAAOA,CAAC;QAAEtD,GAAG;QAAEnC;MAAM,CAAC,EAAE;QACtB,OAAQ,GAAEsG,UAAU,CAACnE,GAAG,CAAE,IAAGnC,KAAM,EAAC;MACtC;IACF;EACF,CAAC;EACDuG,qBAAqB,EAAEP,CAAC,CAAC,yBAAyB,CAAC;EACnDQ,mBAAmB,EAAER,CAAC,CAAC,uBAAuB,CAAC;EAC/CS,oBAAoB,EAAET,CAAC,CAAC,wBAAwB,CAAC;EACjDU,eAAe,EAAEV,CAAC,CAAC,mBAAmB,CAAC;EACvCrD,OAAO,EAAE;IACPuD,OAAO,EAAE;EACX,CAAC;EACDS,qBAAqB,EAAE;IACrBN,MAAM,EAAE;MACNN,cAAc,EAAE,IAAI;MACpBN,OAAOA,CAAC;QAAEtD,GAAG;QAAEnC;MAAM,CAAC,EAAE;QACtB,OAAQ,GAAEsG,UAAU,CAACnE,GAAG,CAAE,IAAGnC,KAAM,EAAC;MACtC;IACF,CAAC;IACDkG,OAAO,EAAE;EACX,CAAC;EACDU,WAAW,EAAE;IACXV,OAAO,EAAE;EACX,CAAC;EACDW,YAAY,EAAE;IACZX,OAAO,EAAE;EACX,CAAC;EACDY,OAAO,EAAEd,CAAC,CAAC,WAAW,CAAC;EACvBe,mBAAmB,EAAEtD,CAAC,CAAC,sBAAsB,CAAC;EAC9CuD,sBAAsB,EAAEvD,CAAC,CAAC,yBAAyB,CAAC;EACpDwD,sBAAsB,EAAExD,CAAC,CAAC,yBAAyB,CAAC;EACpDyD,gBAAgB,EAAElB,CAAC,CAAC,qBAAqB,CAAC;EAC1CmB,UAAU,EAAEnB,CAAC,CAAC,UAAU,CAAC;EACzBoB,gBAAgB,EAAEpB,CAAC,CAAC,qBAAqB,CAAC;EAC1CqB,UAAU,EAAErB,CAAC,CAAC,UAAU,CAAC;EACzBsB,UAAU,EAAEtB,CAAC,CAAC,cAAc,CAAC;EAC7BuB,gBAAgB,EAAEvB,CAAC,CAAC,qBAAqB,CAAC;EAC1CwB,UAAU,EAAExB,CAAC,CAAC,UAAU,CAAC;EACzByB,gBAAgB,EAAEzB,CAAC,CAAC,oBAAoB,CAAC;EACzC0B,eAAe,EAAE1B,CAAC,CAAC,mBAAmB,CAAC;EACvC2B,eAAe,EAAE3B,CAAC,CAAC,kBAAkB,CAAC;EACtC4B,OAAO,EAAE;IACP1B,OAAO,EAAE,YAAY;IACrBG,MAAM,EAAE;MACNN,cAAc,EAAE,GAAG;MACnBN,OAAOA,CAAC;QAAEtD,GAAG;QAAEnC;MAAM,CAAC,EAAE;QACtB,IAAImC,GAAG,KAAK,SAAS,EACnB,OAAQ,GAAEnC,KAAM,EAAC;MACrB;IACF;EACF,CAAC;EACD6H,MAAM,EAAE;IACNxB,MAAM,EAAE;MACNN,cAAc,EAAE,IAAI;MACpBN,OAAOA,CAAC;QAAEtD,GAAG;QAAEnC;MAAM,CAAC,EAAE;QACtB,IAAI,OAAOA,KAAK,KAAK,SAAS,EAC5B,OAAQ,GAAEsG,UAAU,CAACnE,GAAG,CAAE,EAAC,CAAC,KAE5B,OAAQ,GAAEmE,UAAU,CAACnE,GAAG,CAAE,IAAGnC,KAAM,EAAC;MACxC;IACF;EACF,CAAC;EACD8H,aAAa,EAAE;IACb5B,OAAO,EAAE;EACX;AACF,CAAC;AACD,MAAM6B,mBAAmB,GAAG,CAC1B,IAAI,EACJ,MAAM,EACN,SAAS,EACT,SAAS,CACV;AACD,SAASC,kBAAkBA,CAAC7F,GAAG,EAAE;EAC/B,MAAM8F,IAAI,GAAG3B,UAAU,CAACnE,GAAG,CAAC,CAACgC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;EAC1C,IAAI4D,mBAAmB,CAACtF,QAAQ,CAACwF,IAAI,CAAC,EACpC,OAAO,UAAU;EACnB,OAAO9B,iBAAiB,CAAChE,GAAG,CAAC,EAAE+D,OAAO,IAAI,MAAM;AAClD;AACA,SAASgC,mBAAmBA,CAAC/F,GAAG,EAAE;EAChC,OAAOgE,iBAAiB,CAAChE,GAAG,CAAC,EAAEmC,QAAQ,IAAIgC,UAAU,CAACnE,GAAG,CAAC;AAC5D;AACA,SAASmE,UAAUA,CAACnE,GAAG,EAAE;EACvB,MAAMgG,OAAO,GAAGhG,GAAG,CAACyD,OAAO,CAAC,UAAU,EAAE,KAAK,CAAC,CAACpE,WAAW,CAAC,CAAC;EAC5D,MAAMyG,IAAI,GAAGE,OAAO,CAAChE,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;EAClC,IAAI4D,mBAAmB,CAACtF,QAAQ,CAACwF,IAAI,CAAC,IAAIA,IAAI,KAAK,SAAS,EAC1D,OAAO9F,GAAG,CAACyD,OAAO,CAAC,UAAU,EAAE,KAAK,CAAC,CAACpE,WAAW,CAAC,CAAC;EACrD,OAAO2G,OAAO;AAChB;AACA,SAASC,mBAAmBA,CAAChF,KAAK,EAAE;EAClC,IAAInD,KAAK,CAACC,OAAO,CAACkD,KAAK,CAAC,EAAE;IACxB,OAAOA,KAAK,CAAClB,GAAG,CAAEmG,KAAK,IAAKD,mBAAmB,CAACC,KAAK,CAAC,CAAC;EACzD;EACA,IAAI,OAAOjF,KAAK,KAAK,QAAQ,IAAInD,KAAK,CAACC,OAAO,CAACkD,KAAK,CAAC,EACnD,OAAOA,KAAK;EACd,MAAMkF,MAAM,GAAG,CAAC,CAAC;EACjB,KAAK,MAAM,CAACnG,GAAG,EAAEnC,KAAK,CAAC,IAAI+B,MAAM,CAACC,OAAO,CAACoB,KAAK,CAAC,EAC9CkF,MAAM,CAAChC,UAAU,CAACnE,GAAG,CAAC,CAAC,GAAGiG,mBAAmB,CAACpI,KAAK,CAAC;EACtD,OAAOsI,MAAM;AACf;AACA,SAASC,4BAA4BA,CAACvI,KAAK,EAAEmC,GAAG,EAAE;EAChD,MAAMqG,UAAU,GAAGrC,iBAAiB,CAAChE,GAAG,CAAC;EACzC,IAAIA,GAAG,KAAK,SAAS,EACnB,OAAQ,GAAEnC,KAAK,CAACyI,OAAQ,QAAOzI,KAAK,CAAC0I,GAAI,EAAC;EAC5C,OAAOnD,cAAc,CACnB6C,mBAAmB,CAACpI,KAAK,CAAC,EAC1B;IACE8F,iBAAiB,EAAE,GAAG;IACtBC,cAAc,EAAE,IAAI;IACpBN,OAAOA,CAAC;MAAEzF,KAAK,EAAEwF,MAAM;MAAErD,GAAG,EAAEwG;IAAK,CAAC,EAAE;MACpC,IAAInD,MAAM,KAAK,IAAI,EACjB,OAAO,EAAE;MACX,IAAI,OAAOA,MAAM,KAAK,SAAS,EAC7B,OAAQ,GAAEmD,IAAK,EAAC;IACpB,CAAC;IACD,GAAGH,UAAU,EAAEnC;EACjB,CACF,CAAC;AACH;AACA,MAAMuC,kBAAkB,GAAG,CAAC,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,eAAe,CAAC;AAChF,SAASC,QAAQA,CAACzF,KAAK,EAAE;EACvB,MAAM0F,GAAG,GAAG,CAAC,CAAC;EACd/G,MAAM,CAACC,OAAO,CAACoB,KAAK,CAAC,CAAC2F,OAAO,CAAC,CAAC,CAACnF,EAAE,EAAEF,CAAC,CAAC,KAAK;IACzC,IAAItB,MAAM,CAACsB,CAAC,CAAC,KAAK,OAAO,IAAIE,EAAE,EAC7BkF,GAAG,CAAClF,EAAE,CAAC,GAAGF,CAAC;EACf,CAAC,CAAC;EACF,OAAOoF,GAAG;AACZ;AACA,SAASE,iBAAiBA,CAAC7G,GAAG,EAAEuB,CAAC,EAAE;EACjC,MAAM1D,KAAK,GAAG6I,QAAQ,CAACnF,CAAC,CAAC;EACzB,MAAMuE,IAAI,GAAG3B,UAAU,CAACnE,GAAG,CAAC;EAC5B,MAAM8G,IAAI,GAAGjB,kBAAkB,CAACC,IAAI,CAAC;EACrC,IAAIW,kBAAkB,CAACnG,QAAQ,CAACwF,IAAI,CAAC,EAAE;IACrC,MAAM7E,KAAK,GAAG,CAAC,CAAC;IAChBrB,MAAM,CAACC,OAAO,CAAChC,KAAK,CAAC,CAAC+I,OAAO,CAAC,CAAC,CAACnF,EAAE,EAAEsF,EAAE,CAAC,KAAK;MAC1C9F,KAAK,CAAE,GAAEjB,GAAI,GAAEyB,EAAE,KAAK,KAAK,GAAG,EAAE,GAAI,GAAEA,EAAE,CAACuF,MAAM,CAAC,CAAC,CAAC,CAACC,WAAW,CAAC,CAAE,GAAExF,EAAE,CAACkB,KAAK,CAAC,CAAC,CAAE,EAAE,EAAC,CAAC,GAAGoE,EAAE;IAC1F,CAAC,CAAC;IACF,OAAOG,UAAU,CAACjG,KAAK,CAAC,CAACkG,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAK,CAACD,CAAC,CAACN,IAAI,CAAC,EAAE/H,MAAM,IAAI,CAAC,KAAKsI,CAAC,CAACP,IAAI,CAAC,EAAE/H,MAAM,IAAI,CAAC,CAAC,CAAC;EAC1F;EACA,OAAO,CAAC;IAAE,CAAC+H,IAAI,GAAGhB,IAAI;IAAE,GAAGjI;EAAM,CAAC,CAAC;AACrC;AACA,SAASqJ,UAAUA,CAACjG,KAAK,EAAE;EACzB,MAAMqG,MAAM,GAAG,EAAE;EACjB,MAAMC,UAAU,GAAG,CAAC,CAAC;EACrB3H,MAAM,CAACC,OAAO,CAACoB,KAAK,CAAC,CAAC2F,OAAO,CAAC,CAAC,CAAC5G,GAAG,EAAEnC,KAAK,CAAC,KAAK;IAC9C,IAAI,CAACC,KAAK,CAACC,OAAO,CAACF,KAAK,CAAC,EAAE;MACzB,IAAI,OAAOA,KAAK,KAAK,QAAQ,IAAIA,KAAK,EAAE;QACtC,IAAI4I,kBAAkB,CAACnG,QAAQ,CAAC6D,UAAU,CAACnE,GAAG,CAAC,CAAC,EAAE;UAChDsH,MAAM,CAAC5G,IAAI,CAAC,GAAGmG,iBAAiB,CAAC7G,GAAG,EAAEnC,KAAK,CAAC,CAAC;UAC7C;QACF;QACA0J,UAAU,CAACvH,GAAG,CAAC,GAAG0G,QAAQ,CAAC7I,KAAK,CAAC;MACnC,CAAC,MAAM;QACL0J,UAAU,CAACvH,GAAG,CAAC,GAAGnC,KAAK;MACzB;MACA;IACF;IACAA,KAAK,CAAC+I,OAAO,CAAErF,CAAC,IAAK;MACnB+F,MAAM,CAAC5G,IAAI,CAAC,IAAG,OAAOa,CAAC,KAAK,QAAQ,GAAG2F,UAAU,CAAC;QAAE,CAAClH,GAAG,GAAGuB;MAAE,CAAC,CAAC,GAAGsF,iBAAiB,CAAC7G,GAAG,EAAEuB,CAAC,CAAC,EAAC;IAC9F,CAAC,CAAC;EACJ,CAAC,CAAC;EACF,MAAMiG,IAAI,GAAG5E,aAAa,CAAC2E,UAAU,EAAE;IACrCvH,GAAGA,CAAC;MAAEA;IAAI,CAAC,EAAE;MACX,OAAO6F,kBAAkB,CAAC7F,GAAG,CAAC;IAChC,CAAC;IACDnC,KAAKA,CAAC;MAAEmC;IAAI,CAAC,EAAE;MACb,OAAOA,GAAG,KAAK,SAAS,GAAG,SAAS,GAAG,SAAS;IAClD,CAAC;IACD+C,cAAcA,CAAC;MAAE/C;IAAI,CAAC,EAAE;MACtB,OAAO+F,mBAAmB,CAAC/F,GAAG,CAAC;IACjC,CAAC;IACDkD,gBAAgBA,CAAC;MAAErF,KAAK;MAAEmC;IAAI,CAAC,EAAE;MAC/B,IAAInC,KAAK,KAAK,IAAI,EAChB,OAAO,OAAO;MAChB,IAAI,OAAOA,KAAK,KAAK,QAAQ,EAC3B,OAAOuI,4BAA4B,CAACvI,KAAK,EAAEmC,GAAG,CAAC;MACjD,OAAO,OAAOnC,KAAK,KAAK,QAAQ,GAAGA,KAAK,CAACsB,QAAQ,CAAC,CAAC,GAAGtB,KAAK;IAC7D;EACF,CAAC,CAAC;EACF,OAAO,CAAC,GAAGyJ,MAAM,EAAE,GAAGE,IAAI,CAAC,CAACzH,GAAG,CAAE0H,CAAC,IAAK;IACrC,IAAIA,CAAC,CAACC,OAAO,KAAK,OAAO,EACvBD,CAAC,CAACC,OAAO,GAAG,IAAI;IAClB,OAAOD,CAAC;EACV,CAAC,CAAC;AACJ;AACA,SAASE,QAAQA,CAACC,MAAM,EAAE;EACxB,MAAMC,mBAAmB,GAAGjI,MAAM,CAACC,OAAO,CAACmE,iBAAiB,CAAC,CAACjE,GAAG,CAAC,CAAC,CAACC,GAAG,EAAEnC,KAAK,CAAC,KAAK,CAACmC,GAAG,EAAEnC,KAAK,CAACsE,QAAQ,CAAC,CAAC;EAC1G,OAAOC,SAAS,CAACwF,MAAM,EAAE;IACvB5H,GAAG,EAAE,CAAC,MAAM,EAAE,UAAU,EAAE,WAAW,EAAE,YAAY,EAAE,SAAS,CAAC;IAC/DnC,KAAK,EAAE,CAAC,SAAS,EAAE,SAAS,CAAC;IAC7B2D,UAAUA,CAACC,EAAE,EAAE;MACb,IAAIzB,GAAG,GAAG6H,mBAAmB,CAACC,MAAM,CAAEC,EAAE,IAAKA,EAAE,CAAC,CAAC,CAAC,KAAKtG,EAAE,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,IAAIA,EAAE;MAC1E,MAAMuG,QAAQ,GAAGA,CAACC,CAAC,EAAEC,MAAM,KAAKA,MAAM,EAAEjB,WAAW,CAAC,CAAC;MACrDjH,GAAG,GAAGA,GAAG,CAACyD,OAAO,CAAC,WAAW,EAAEuE,QAAQ,CAAC,CAACvE,OAAO,CAAC,WAAW,EAAEuE,QAAQ,CAAC;MACvE,OAAOhI,GAAG;IACZ;EACF,CAAC,CAAC;AACJ;AAEA,MAAMmI,mBAAmB,GAAG;EAC1BC,SAAS,EAAE,CAAC,IAAI,EAAE,OAAO,EAAE,MAAM,EAAE,KAAK,CAAC;EACzCC,SAAS,EAAE,CAAC,IAAI,EAAE,OAAO,CAAC;EAC1Bb,IAAI,EAAE,CAAC,IAAI,EAAE,MAAM,EAAE,UAAU,EAAE,SAAS,EAAE,SAAS,CAAC;EACtDc,QAAQ,EAAE,CAAC,IAAI,EAAE,aAAa,CAAC;EAC/BC,MAAM,EAAE,CAAC,IAAI,EAAE,MAAM,EAAE,aAAa,CAAC;EACrCC,IAAI,EAAE,CAAC,IAAI,EAAE,OAAO,EAAE,aAAa,EAAE,eAAe,EAAE,MAAM,EAAE,UAAU,EAAE,aAAa,EAAE,YAAY,EAAE,WAAW,EAAE,OAAO,EAAE,gBAAgB,EAAE,KAAK,EAAE,OAAO,EAAE,MAAM;AACvK,CAAC;AACD,SAASC,eAAeA,CAAC5K,KAAK,EAAE;EAC9B,MAAM6K,QAAQ,GAAG,CAAC,CAAC;EACnB9I,MAAM,CAACyB,IAAI,CAACxD,KAAK,IAAI,CAAC,CAAC,CAAC,CAACiK,MAAM,CAAEV,CAAC,IAAKA,CAAC,CAAC3E,UAAU,CAAC,OAAO,CAAC,CAAC,CAACmE,OAAO,CAAEQ,CAAC,IAAK;IAC3EsB,QAAQ,CAACtB,CAAC,CAAC,GAAGvJ,KAAK,CAACuJ,CAAC,CAAC;EACxB,CAAC,CAAC;EACF,OAAOsB,QAAQ;AACjB;AACA,SAASC,kBAAkBA,CAAC1H,KAAK,EAAE;EACjC,MAAMyH,QAAQ,GAAG,CAAC,CAAC;EACnB9I,MAAM,CAACyB,IAAI,CAACJ,KAAK,CAAC,CAAC2F,OAAO,CAAE5G,GAAG,IAAK;IAClC,MAAM4I,QAAQ,GAAG3H,KAAK,CAACjB,GAAG,CAAC;IAC3B,IAAI,CAAC4I,QAAQ,EACX;IACF,QAAQ5I,GAAG;MACT,KAAK,OAAO;MACZ,KAAK,eAAe;MACpB,KAAK,gBAAgB;QACnB0I,QAAQ,CAAC1I,GAAG,CAAC,GAAG4I,QAAQ;QACxB;MACF,KAAK,WAAW;MAChB,KAAK,WAAW;QACdF,QAAQ,CAAC1I,GAAG,CAAC,GAAGyI,eAAe,CAACG,QAAQ,CAAC;QACzCT,mBAAmB,CAACnI,GAAG,CAAC,CAAC4G,OAAO,CAAEQ,CAAC,IAAK;UACtC,IAAIwB,QAAQ,CAACxB,CAAC,CAAC,EACbsB,QAAQ,CAAC1I,GAAG,CAAC,CAACoH,CAAC,CAAC,GAAGwB,QAAQ,CAACxB,CAAC,CAAC;QAClC,CAAC,CAAC;QACF;MACF,KAAK,MAAM;QACT,IAAItJ,KAAK,CAACC,OAAO,CAAC6K,QAAQ,CAAC,EAAE;UAC3BF,QAAQ,CAAC1I,GAAG,CAAC,GAAG4I,QAAQ,CAAC7I,GAAG,CAAEyH,IAAI,IAAK;YACrC,MAAMqB,QAAQ,GAAGJ,eAAe,CAACjB,IAAI,CAAC;YACtCW,mBAAmB,CAACX,IAAI,CAACZ,OAAO,CAAEJ,IAAI,IAAK;cACzC,IAAIgB,IAAI,CAAChB,IAAI,CAAC,EACZqC,QAAQ,CAACrC,IAAI,CAAC,GAAGgB,IAAI,CAAChB,IAAI,CAAC;YAC/B,CAAC,CAAC;YACF,OAAOqC,QAAQ;UACjB,CAAC,CAAC,CAACf,MAAM,CAAEN,IAAI,IAAK5H,MAAM,CAACyB,IAAI,CAACmG,IAAI,CAAC,CAACzI,MAAM,GAAG,CAAC,CAAC;QACnD;QACA;MACF,KAAK,MAAM;QACT,IAAIjB,KAAK,CAACC,OAAO,CAAC6K,QAAQ,CAAC,EAAE;UAC3BF,QAAQ,CAAC1I,GAAG,CAAC,GAAG4I,QAAQ,CAAC7I,GAAG,CAAEyH,IAAI,IAAK;YACrC,MAAMgB,IAAI,GAAGC,eAAe,CAACjB,IAAI,CAAC;YAClCW,mBAAmB,CAACK,IAAI,CAAC5B,OAAO,CAAEJ,IAAI,IAAK;cACzC,MAAM5F,GAAG,GAAG4G,IAAI,CAAChB,IAAI,CAAC;cACtB,IAAIA,IAAI,KAAK,KAAK,IAAI,CAAC,YAAY,EAAE,WAAW,EAAE,eAAe,EAAE,WAAW,EAAE,SAAS,EAAE,UAAU,CAAC,CAAClG,QAAQ,CAACM,GAAG,CAAC,EAClH;cACF,IAAI4F,IAAI,KAAK,MAAM,EAAE;gBACnB,IAAI5F,GAAG,CAACN,QAAQ,CAAC,aAAa,CAAC,IAAIM,GAAG,CAACN,QAAQ,CAAC,OAAO,CAAC,EACtD;gBACFkI,IAAI,CAAChC,IAAI,CAAC,GAAG5F,GAAG;cAClB,CAAC,MAAM,IAAIA,GAAG,EAAE;gBACd4H,IAAI,CAAChC,IAAI,CAAC,GAAG5F,GAAG;cAClB;YACF,CAAC,CAAC;YACF,OAAO4H,IAAI;UACb,CAAC,CAAC,CAACV,MAAM,CAAEU,IAAI,IAAK5I,MAAM,CAACyB,IAAI,CAACmH,IAAI,CAAC,CAACzJ,MAAM,GAAG,CAAC,IAAI,CAAC,CAACyJ,IAAI,CAACjI,GAAG,CAAC;QACjE;QACA;MACF,KAAK,UAAU;QACb,IAAIzC,KAAK,CAACC,OAAO,CAAC6K,QAAQ,CAAC,EAAE;UAC3BF,QAAQ,CAAC1I,GAAG,CAAC,GAAG4I,QAAQ,CAAC7I,GAAG,CAAEyH,IAAI,IAAK;YACrC,MAAMc,QAAQ,GAAGG,eAAe,CAACjB,IAAI,CAAC;YACtCW,mBAAmB,CAACG,QAAQ,CAAC1B,OAAO,CAAEJ,IAAI,IAAK;cAC7C,IAAIgB,IAAI,CAAChB,IAAI,CAAC,EACZ8B,QAAQ,CAAC9B,IAAI,CAAC,GAAGgB,IAAI,CAAChB,IAAI,CAAC;YAC/B,CAAC,CAAC;YACF,OAAO8B,QAAQ;UACjB,CAAC,CAAC,CAACR,MAAM,CAAEN,IAAI,IAAK5H,MAAM,CAACyB,IAAI,CAACmG,IAAI,CAAC,CAACzI,MAAM,GAAG,CAAC,CAAC;QACnD;QACA;MACF,KAAK,QAAQ;QACX,IAAIjB,KAAK,CAACC,OAAO,CAAC6K,QAAQ,CAAC,EAAE;UAC3BF,QAAQ,CAAC1I,GAAG,CAAC,GAAG4I,QAAQ,CAAC7I,GAAG,CAAEwI,MAAM,IAAK;YACvC,MAAMO,UAAU,GAAGL,eAAe,CAACF,MAAM,CAAC;YAC1CJ,mBAAmB,CAACI,MAAM,CAAC3B,OAAO,CAAEhI,CAAC,IAAK;cACxC,IAAI2J,MAAM,CAAC3J,CAAC,CAAC,EAAE;gBACb,IAAIA,CAAC,KAAK,aAAa,EAAE;kBACvB,IAAI;oBACF,MAAMmK,OAAO,GAAG,OAAOR,MAAM,CAAC3J,CAAC,CAAC,KAAK,QAAQ,GAAGoK,IAAI,CAACC,KAAK,CAACV,MAAM,CAAC3J,CAAC,CAAC,CAAC,GAAG2J,MAAM,CAAC3J,CAAC,CAAC;oBACjFkK,UAAU,CAAClK,CAAC,CAAC,GAAGoK,IAAI,CAACE,SAAS,CAACH,OAAO,EAAE,IAAI,EAAE,CAAC,CAAC;kBAClD,CAAC,CAAC,OAAOI,CAAC,EAAE,CACZ;gBACF,CAAC,MAAM;kBACLL,UAAU,CAAClK,CAAC,CAAC,GAAG2J,MAAM,CAAC3J,CAAC,CAAC;gBAC3B;cACF;YACF,CAAC,CAAC;YACF,OAAOkK,UAAU;UACnB,CAAC,CAAC,CAAChB,MAAM,CAAEN,IAAI,IAAK5H,MAAM,CAACyB,IAAI,CAACmG,IAAI,CAAC,CAACzI,MAAM,GAAG,CAAC,CAAC;QACnD;QACA;IACJ;EACF,CAAC,CAAC;EACF,OAAO2J,QAAQ;AACjB;AAEA,eAAeU,YAAYA,CAAC/I,OAAO,EAAEY,KAAK,EAAEkI,CAAC,EAAE;EAC7C,MAAM5J,GAAG,GAAG;IACVA,GAAG,EAAEc,OAAO;IACZP,KAAK,EAAE,MAAMuJ,cAAc;IACzB;IACA;IACA,OAAOpI,KAAK,KAAK,QAAQ,IAAI,OAAOA,KAAK,KAAK,UAAU,IAAI,EAAEA,KAAK,YAAYqI,OAAO,CAAC,GAAG;MAAE,GAAGrI;IAAM,CAAC,GAAG;MAAE,CAAC,CAAC,QAAQ,EAAE,UAAU,EAAE,OAAO,CAAC,CAACX,QAAQ,CAACD,OAAO,CAAC,GAAG,WAAW,GAAG,aAAa,GAAGY;IAAM,CAAC,EACrM,CAAC,gBAAgB,EAAE,eAAe,CAAC,CAACX,QAAQ,CAACD,OAAO,CACtD;EACF,CAAC;EACDhC,aAAa,CAACuI,OAAO,CAAEtF,CAAC,IAAK;IAC3B,MAAMV,GAAG,GAAG,OAAOrB,GAAG,CAACO,KAAK,CAACwB,CAAC,CAAC,KAAK,WAAW,GAAG/B,GAAG,CAACO,KAAK,CAACwB,CAAC,CAAC,GAAG6H,CAAC,CAAC7H,CAAC,CAAC;IACrE,IAAI,OAAOV,GAAG,KAAK,WAAW,EAAE;MAC9B,IAAI,CAAC,CAAC,WAAW,EAAE,aAAa,EAAE,UAAU,CAAC,CAACN,QAAQ,CAACgB,CAAC,CAAC,IAAIrD,oBAAoB,CAACqC,QAAQ,CAACf,GAAG,CAACA,GAAG,CAAC,EAAE;QACnGA,GAAG,CAAC+B,CAAC,KAAK,UAAU,GAAG,WAAW,GAAGA,CAAC,CAAC,GAAGV,GAAG;MAC/C;MACA,OAAOrB,GAAG,CAACO,KAAK,CAACwB,CAAC,CAAC;IACrB;EACF,CAAC,CAAC;EACF,IAAI/B,GAAG,CAACO,KAAK,CAACyJ,IAAI,EAAE;IAClBhK,GAAG,CAACiK,WAAW,GAAG,WAAW;IAC7B,OAAOjK,GAAG,CAACO,KAAK,CAACyJ,IAAI;EACvB;EACA,IAAIhK,GAAG,CAACA,GAAG,KAAK,QAAQ,EAAE;IACxB,IAAI,OAAOA,GAAG,CAACI,SAAS,KAAK,QAAQ,EAAE;MACrCJ,GAAG,CAACI,SAAS,GAAGqJ,IAAI,CAACE,SAAS,CAAC3J,GAAG,CAACI,SAAS,CAAC;MAC7CJ,GAAG,CAACO,KAAK,CAAC2J,IAAI,GAAGlK,GAAG,CAACO,KAAK,CAAC2J,IAAI,IAAI,kBAAkB;IACvD;EACF;EACA,OAAO3L,KAAK,CAACC,OAAO,CAACwB,GAAG,CAACO,KAAK,CAAC4H,OAAO,CAAC,GAAGnI,GAAG,CAACO,KAAK,CAAC4H,OAAO,CAAC3H,GAAG,CAAEwB,CAAC,KAAM;IAAE,GAAGhC,GAAG;IAAEO,KAAK,EAAE;MAAE,GAAGP,GAAG,CAACO,KAAK;MAAE4H,OAAO,EAAEnG;IAAE;EAAE,CAAC,CAAC,CAAC,GAAGhC,GAAG;AACjI;AACA,SAASmK,kBAAkBA,CAACnI,CAAC,EAAE;EAC7B,IAAI,OAAOA,CAAC,KAAK,QAAQ,IAAI,CAACzD,KAAK,CAACC,OAAO,CAACwD,CAAC,CAAC,EAAE;IAC9CA,CAAC,GAAG3B,MAAM,CAACyB,IAAI,CAACE,CAAC,CAAC,CAACuG,MAAM,CAAExG,CAAC,IAAKC,CAAC,CAACD,CAAC,CAAC,CAAC;EACxC;EACA,OAAO,CAACxD,KAAK,CAACC,OAAO,CAACwD,CAAC,CAAC,GAAGA,CAAC,CAACrB,IAAI,CAAC,GAAG,CAAC,GAAGqB,CAAC,EAAES,KAAK,CAAC,GAAG,CAAC,CAAC8F,MAAM,CAAE6B,CAAC,IAAKA,CAAC,CAACC,IAAI,CAAC,CAAC,CAAC,CAAC9B,MAAM,CAAC+B,OAAO,CAAC,CAAC3J,IAAI,CAAC,GAAG,CAAC;AAC1G;AACA,eAAemJ,cAAcA,CAACvJ,KAAK,EAAEgK,OAAO,EAAE;EAC5C,KAAK,MAAMxI,CAAC,IAAI1B,MAAM,CAACyB,IAAI,CAACvB,KAAK,CAAC,EAAE;IAClC,IAAIwB,CAAC,KAAK,OAAO,EAAE;MACjBxB,KAAK,CAACwB,CAAC,CAAC,GAAGoI,kBAAkB,CAAC5J,KAAK,CAACwB,CAAC,CAAC,CAAC;MACvC;IACF;IACA,IAAIxB,KAAK,CAACwB,CAAC,CAAC,YAAYgI,OAAO,EAC7BxJ,KAAK,CAACwB,CAAC,CAAC,GAAG,MAAMxB,KAAK,CAACwB,CAAC,CAAC;IAC3B,IAAI,CAACwI,OAAO,IAAI,CAACzL,aAAa,CAACiC,QAAQ,CAACgB,CAAC,CAAC,EAAE;MAC1C,MAAMC,CAAC,GAAGtB,MAAM,CAACH,KAAK,CAACwB,CAAC,CAAC,CAAC;MAC1B,MAAMyI,SAAS,GAAGzI,CAAC,CAACmB,UAAU,CAAC,OAAO,CAAC;MACvC,IAAIlB,CAAC,KAAK,MAAM,IAAIA,CAAC,KAAK,EAAE,EAAE;QAC5BzB,KAAK,CAACwB,CAAC,CAAC,GAAGyI,SAAS,GAAG,MAAM,GAAG,IAAI;MACtC,CAAC,MAAM,IAAI,CAACjK,KAAK,CAACwB,CAAC,CAAC,EAAE;QACpB,IAAIyI,SAAS,IAAIxI,CAAC,KAAK,OAAO,EAC5BzB,KAAK,CAACwB,CAAC,CAAC,GAAG,OAAO,CAAC,KAEnB,OAAOxB,KAAK,CAACwB,CAAC,CAAC;MACnB;IACF;EACF;EACA,OAAOxB,KAAK;AACd;AACA,MAAMkK,aAAa,GAAG,EAAE;AACxB,eAAeC,kBAAkBA,CAACd,CAAC,EAAE;EACnC,MAAMe,WAAW,GAAG,EAAE;EACtBtK,MAAM,CAACC,OAAO,CAACsJ,CAAC,CAACgB,aAAa,CAAC,CAACrC,MAAM,CAAC,CAAC,CAACxG,CAAC,EAAEC,CAAC,CAAC,KAAK,OAAOA,CAAC,KAAK,WAAW,IAAIpD,aAAa,CAACmC,QAAQ,CAACgB,CAAC,CAAC,CAAC,CAACsF,OAAO,CAAC,CAAC,CAACtF,CAAC,EAAEzD,KAAK,CAAC,KAAK;IAChI,MAAM0D,CAAC,GAAG3D,SAAS,CAACC,KAAK,CAAC;IAC1BqM,WAAW,CAACxJ,IAAI,CAAC,GAAGa,CAAC,CAACxB,GAAG,CAAED,KAAK,IAAKsJ,YAAY,CAAC9H,CAAC,EAAExB,KAAK,EAAEqJ,CAAC,CAAC,CAAC,CAAChG,IAAI,CAAC,CAAC,CAAC;EACzE,CAAC,CAAC;EACF,OAAO,CAAC,MAAMmG,OAAO,CAACc,GAAG,CAACF,WAAW,CAAC,EAAE/G,IAAI,CAAC,CAAC,CAAC2E,MAAM,CAAC+B,OAAO,CAAC,CAAC9J,GAAG,CAAC,CAACsK,CAAC,EAAEvL,CAAC,KAAK;IAC3EuL,CAAC,CAACC,EAAE,GAAGnB,CAAC,CAACoB,EAAE;IACXpB,CAAC,CAACqB,IAAI,KAAKH,CAAC,CAACI,EAAE,GAAGtB,CAAC,CAACqB,IAAI,CAAC;IACzBH,CAAC,CAACK,EAAE,GAAG,CAACvB,CAAC,CAACoB,EAAE,IAAIP,aAAa,IAAIlL,CAAC;IAClC,OAAOuL,CAAC;EACV,CAAC,CAAC;AACJ;AAEA,MAAMM,WAAW,GAAG;EAClB;EACAC,IAAI,EAAE,CAAC,EAAE;EACT7J,KAAK,EAAE;AACT,CAAC;AACD,MAAM8J,WAAW,GAAG;EAClB;EACAC,QAAQ,EAAE,CAAC,EAAE;EACbC,IAAI,EAAE,CAAC,EAAE;EACTC,GAAG,EAAE;AACP,CAAC;AACD,SAASC,SAASA,CAAC1L,GAAG,EAAE;EACtB,IAAI2L,MAAM,GAAG,GAAG;EAChB,MAAMC,QAAQ,GAAG5L,GAAG,CAAC6L,WAAW;EAChC,IAAI,OAAOD,QAAQ,KAAK,QAAQ,EAC9B,OAAOA,QAAQ;EACjB,IAAI5L,GAAG,CAACA,GAAG,KAAK,MAAM,EAAE;IACtB,IAAIA,GAAG,CAACO,KAAK,CAAC,YAAY,CAAC,KAAK,yBAAyB,EACvDoL,MAAM,GAAG,CAAC,EAAE;IACd,IAAI3L,GAAG,CAACO,KAAK,CAACU,OAAO,EACnB0K,MAAM,GAAG,CAAC,EAAE;IACd,IAAI3L,GAAG,CAACO,KAAK,CAACW,IAAI,KAAK,UAAU,EAC/ByK,MAAM,GAAG,CAAC,EAAE;EAChB,CAAC,MAAM,IAAI3L,GAAG,CAACA,GAAG,KAAK,MAAM,IAAIA,GAAG,CAACO,KAAK,CAACS,GAAG,KAAK,YAAY,EAAE;IAC/D2K,MAAM,GAAG,EAAE;EACb,CAAC,MAAM,IAAI3L,GAAG,CAACA,GAAG,IAAIoL,WAAW,EAAE;IACjCO,MAAM,GAAGP,WAAW,CAACpL,GAAG,CAACA,GAAG,CAAC;EAC/B;EACA,IAAI,OAAO4L,QAAQ,KAAK,QAAQ,IAAIA,QAAQ,IAAIN,WAAW,EAAE;IAC3D,OAAOK,MAAM,GAAGL,WAAW,CAACM,QAAQ,CAAC;EACvC;EACA,OAAOD,MAAM;AACf;AACA,MAAMG,aAAa,GAAG,CAAC;EAAEC,MAAM,EAAE,SAAS;EAAEC,MAAM,EAAE,CAAC;AAAE,CAAC,EAAE;EAAED,MAAM,EAAE,QAAQ;EAAEC,MAAM,EAAE;AAAE,CAAC,CAAC;AAE1F,MAAMC,aAAa,GAAG,CAAC,QAAQ,EAAE,SAAS,EAAE,SAAS,EAAE,YAAY,EAAE,aAAa,CAAC;AAEnF,MAAMC,MAAM,GAAG,YAAY;AAC3B,SAASC,qBAAqBA,CAAC9M,CAAC,EAAEiF,CAAC,EAAE8H,GAAG,EAAE;EACxC,IAAI,OAAO/M,CAAC,KAAK,QAAQ,IAAI,CAACA,CAAC,CAAC0B,QAAQ,CAAC,GAAG,CAAC,EAC3C,OAAO1B,CAAC;EACV,SAASgN,GAAGA,CAACC,KAAK,EAAE;IAClB,IAAIjL,GAAG;IACP,IAAI,CAAC,GAAG,EAAE,WAAW,CAAC,CAACN,QAAQ,CAACuL,KAAK,CAAC,EAAE;MACtCjL,GAAG,GAAGiD,CAAC,CAACiI,SAAS;IACnB,CAAC,MAAM,IAAID,KAAK,CAACvL,QAAQ,CAAC,GAAG,CAAC,EAAE;MAC9BM,GAAG,GAAGiL,KAAK,CAAC7J,KAAK,CAAC,GAAG,CAAC,CAAC+J,MAAM,CAAC,CAACC,GAAG,EAAEhM,GAAG,KAAKgM,GAAG,GAAGA,GAAG,CAAChM,GAAG,CAAC,IAAI,KAAK,CAAC,GAAG,KAAK,CAAC,EAAE6D,CAAC,CAAC;IACnF,CAAC,MAAM;MACLjD,GAAG,GAAGiD,CAAC,CAACgI,KAAK,CAAC;IAChB;IACA,OAAO,OAAOjL,GAAG,KAAK,WAAW,GAAG,CAACA,GAAG,IAAI,EAAE,EAAE6C,OAAO,CAAC,IAAI,EAAE,KAAK,CAAC,GAAG,KAAK;EAC9E;EACA,IAAIwI,OAAO,GAAGrN,CAAC;EACf,IAAI;IACFqN,OAAO,GAAGC,SAAS,CAACtN,CAAC,CAAC;EACxB,CAAC,CAAC,MAAM,CACR;EACA,MAAMuN,MAAM,GAAG,CAACF,OAAO,CAACG,KAAK,CAAC,sBAAsB,CAAC,IAAI,EAAE,EAAEjF,IAAI,CAAC,CAAC,CAACkF,OAAO,CAAC,CAAC;EAC7EF,MAAM,CAACvF,OAAO,CAAEiF,KAAK,IAAK;IACxB,MAAMS,EAAE,GAAGV,GAAG,CAACC,KAAK,CAAClJ,KAAK,CAAC,CAAC,CAAC,CAAC;IAC9B,IAAI,OAAO2J,EAAE,KAAK,QAAQ,EAAE;MAC1B1N,CAAC,GAAGA,CAAC,CAAC6E,OAAO,CAAC,IAAIC,MAAM,CAAE,KAAImI,KAAM,SAAQ,EAAE,GAAG,CAAC,EAAE,CAAC5D,CAAC,EAAEsE,IAAI,KAAM,GAAED,EAAG,GAAEC,IAAK,EAAC,CAAC,CAAC3C,IAAI,CAAC,CAAC;IACzF;EACF,CAAC,CAAC;EACF,IAAIhL,CAAC,CAAC0B,QAAQ,CAACmL,MAAM,CAAC,EAAE;IACtB,IAAI7M,CAAC,CAAC4N,QAAQ,CAACf,MAAM,CAAC,EACpB7M,CAAC,GAAGA,CAAC,CAAC+D,KAAK,CAAC,CAAC,EAAE,CAAC8I,MAAM,CAAC1M,MAAM,CAAC,CAAC6K,IAAI,CAAC,CAAC;IACvC,IAAIhL,CAAC,CAAC6D,UAAU,CAACgJ,MAAM,CAAC,EACtB7M,CAAC,GAAGA,CAAC,CAAC+D,KAAK,CAAC8I,MAAM,CAAC1M,MAAM,CAAC,CAAC6K,IAAI,CAAC,CAAC;IACnChL,CAAC,GAAGA,CAAC,CAAC6E,OAAO,CAAC,IAAIC,MAAM,CAAE,KAAI+H,MAAO,SAAQA,MAAO,EAAC,EAAE,GAAG,CAAC,EAAEA,MAAM,CAAC;IACpE7M,CAAC,GAAG8M,qBAAqB,CAAC9M,CAAC,EAAE;MAAE6N,SAAS,EAAEd;IAAI,CAAC,EAAEA,GAAG,CAAC;EACvD;EACA,OAAO/M,CAAC;AACV;AAEA,SAASV,cAAc,EAAEI,SAAS,EAAEkN,aAAa,EAAExN,eAAe,EAAEqN,aAAa,EAAER,WAAW,EAAEF,WAAW,EAAEtM,aAAa,EAAE2L,aAAa,EAAE/L,oBAAoB,EAAEG,UAAU,EAAED,aAAa,EAAEP,SAAS,IAAIoD,OAAO,EAAExC,eAAe,EAAEC,gBAAgB,EAAEE,QAAQ,EAAEW,OAAO,EAAEoK,kBAAkB,EAAEO,kBAAkB,EAAEZ,cAAc,EAAED,YAAY,EAAEzB,QAAQ,EAAE+D,qBAAqB,EAAE7F,kBAAkB,EAAEE,mBAAmB,EAAEK,4BAA4B,EAAEvF,oBAAoB,EAAEV,YAAY,EAAE8K,SAAS,EAAE/D,UAAU,EAAEyB,kBAAkB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}